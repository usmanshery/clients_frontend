{"version":3,"sources":["store/api.js","store/globals/nav.js","store/globals/filter.js","store/session.js","components/Navbar/Navbar.js","components/Navbar/Sidebar.js","components/Dropdown/Menu.js","components/Dropdown/DropdownMenu.js","components/User/User.js","components/Campaign/Campaign.js","components/Videos/VideoPlayer/VideoPlayer.js","components/Videos/Video.js","components/Admin/Admin.js","components/FunctionalComponents/Link.js","store/globals/codes.js","components/Login/Login.js","components/Login/Register.js","components/Login/PasswordReset.js","App.js","serviceWorker.js","store/middleware/api.js","store/store.js","index.js"],"names":["apiCall","createAction","modules","user","video","campaign","passwordReset","login","register","adminModules","userFilters","campaignFilters","videoFilters","validateEmail","mail","test","initialState","loading","loggedIn","activeModule","userFilter","filter","campaignFilter","userData","name","email","admin","key","bucketFolder","cookies","Cookies","slice","createSlice","reducers","onPageLoad","state","action","payload","success","set","nav","get","onLogin","onLogout","onNevigate","to","includes","onFetchUsers","userPoolData","users","onUserFilter","onVideoFilter","albumUrl","albumName","onCampaignFilter","onFetchCampaigns","campaignList","campaigns","map","userCampaignData","campaignData","campaignName","campaignUrl","campaignURL","onFetchVideoList","albumList","videos","onRemoveVideo","album","videoKey","onSelectAlbum","onFetchVideoUrl","videoUrl","onClearVideoUrl","onWaitAction","actions","onExistingUserCheck","baseUrl","campaignsUrl","headers","methods","existingUserAction","cb","url","existingUserUrl","callParams","method","credentials","navigate","fetchCampaignAction","userEmail","onSuccess","type","onFailure","NavbarPage","collapseID","toggleCollapse","setState","prevState","color","dark","expand","scrolling","fixed","className","onClick","this","id","isOpen","navbar","left","active","props","style","display","link","right","logout","console","log","far","icon","username","Component","connect","dispatch","usersUrl","Sidebar","isAdmin","fetchCampaigns","campaignPlaylists","overlay","setAlbumName","filterVideos","title","videoMenu","userCampaignPlaylists","userMenu","defaultOpen","filterUsers","generateAdminVideoMenu","generateUserVideoMenu","campaignMenu","filterCampaigns","position","bottom","top","width","setActiveAlbumName","getArrowTranslate","layerSide","x","y","OFFSET","outTransform","MenuBase","styled","motion","ul","Arrow","height","fill","fillRule","d","Menu","React","forwardRef","ref","arrowStyle","children","initial","opacity","scale","animate","exit","transition","stiffness","damping","transformOrigin","transform","ItemBase","li","MenuItem","rest","DropdownMenu","closeOnOutsideClick","renderLayer","_props","menuItems","options","item","callback","close","layerProps","placement","anchor","autoAdjust","snapToAnchor","triggerOffset","scrollOffset","preferX","trigger","User","columns","label","field","userManagementActions","toggleActive","removeUser","addUser","rows","manageUser","bind","onChange","resetForm","checkUserExistsResponse","addUserResponse","fetchUsers","property","val","element","document","getElementById","response","companyName","location","postCode","country","employeeSize","contactPersonName","contactPersonEmail","contactPersonRole","contactPersonNumber","password","role","contact","company","targetUser","find","updateUser","existingUserCheck","password_re","checkUserExists","length","idCounter","checked","size","rounded","triggerRef","toggle","data-ripple-color","btn","onSubmit","e","preventDefault","md","group","value","target","FormControlLabel","control","Checkbox","outline","updatedUser","body","JSON","stringify","removedUser","newUser","addUserAction","Campaign","campaignManagementActions","addCampaign","removeCampaign","updateCampaign","intro_len","startdate","Date","enddate","manageCampaign","checkCampaignURLExistsResponse","addCampaignResponse","index","substring","questions","errElement","question","balance","parseInt","duration","intro","getTime","targetCampaign","checkCampaignURLExists","questionField","IconButton","autoOk","variant","minDate","inputVariant","format","InputAdornmentProps","date","Button","startIcon","updatedCampaign","updateCampaignAction","removeCampaignAction","existingCampaignAction","newCampaign","addCampaignAction","VJSPlayer","player","src","controls","onReady","onPlayerReady","onPlay","onVideoPlay","onEnd","onVideoEnd","Video","generateTable","downloadVideo","playVideo","closeVideo","undefined","tableRows","deleteVideo","FacebookShareButton","quote","FacebookIcon","TwitterShareButton","TwitterIcon","RedditShareButton","RedditIcon","WhatsappShareButton","WhatsappIcon","LinkedinShareButton","source","LinkedinIcon","window","href","videoTable","showVideo","vidoeKey","removeVideoURL","replace","removeVideoAction","Admin","Navbar","padding","Link","classes","prepend","text","append","cursor","notificationType","Login","initLogin","notify","message","validate","error","loginAction","Register","initRegister","registerAction","PasswordReset","generateOTP","generateOTPResponse","initPasswordReset","passwordResetResponse","emailInputDisabled","el","otp","err","disabled","otpUrl","otpAction","passwordResetAction","App","content","toast","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","warn","overlayStyle","newestOnTop","rtl","pauseOnFocusLoss","Boolean","hostname","match","data","api","next","a","fetch","then","json","catch","store","configureStore","reducer","middleware","getDefaultMiddleware","ReactDOM","render","StrictMode","utils","DateFnsUtils","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.5787842e.chunk.js","sourcesContent":["import { createAction } from '@reduxjs/toolkit';\r\n\r\nexport const apiCall = createAction(\"apiCall\");\r\nexport const apiSyncCall = createAction(\"apiSyncCall\");\r\nexport const apiCallFailure = createAction(\"apiCallFailure\");","export const modules = {\t\r\n\tuser: 'user',\r\n\tvideo: 'video',\r\n\tcampaign: 'campaign',\r\n\tpasswordReset: 'passwordReset',\r\n\tlogin: 'login',\r\n\tregister: 'register'\r\n}\r\n\r\nconst adminModules = [\r\n\t'user'\r\n]\r\n\r\nexport const validate = (to) => {\r\n\treturn to in modules;\r\n}\r\n\r\nexport const validateAdminRight = (to) => {\r\n\treturn adminModules.includes(to);\r\n}","export const userFilters = {\r\n\tAll: \"All\",\r\n\tActive: \"Active\",\r\n\tInactive: \"Inactive\",\r\n\tNew: \"New\"\r\n}\r\n\r\nexport const campaignFilters = {\r\n\tAll: \"All\",\r\n\tActive: \"Active\",\r\n\tPast: \"Past\",\r\n\tNew: \"New\"\r\n}\r\n\r\nexport const videoFilters = {\r\n\tvideostuff: 'videostuff'\r\n}\r\n\r\n\r\nexport const validateEmail = (mail) => {\r\n\tif (/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/.test(mail)) {\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}","import { createSlice } from '@reduxjs/toolkit';\r\nimport Cookies from 'universal-cookie';\r\nimport { apiCall } from './api';\r\nimport * as nav from './globals/nav';\r\nimport * as filter from './globals/filter';\r\n\r\nconst initialState = {\r\n\tloading: false,\r\n\tloggedIn: false,\r\n\tactiveModule: null,\r\n\tuserFilter: filter.userFilters.All,\r\n\tcampaignFilter: filter.campaignFilters.All,\r\n\tuserData: {\r\n\t\tname: null,\r\n\t\temail: null,\r\n\t\tadmin: false,\r\n\t\tkey: null,\r\n\t\tbucketFolder: null\r\n\t}\r\n};\r\n\r\nconst cookies = new Cookies();\r\n\r\nconst slice = createSlice({\r\n\tname: 'session',\r\n\tinitialState,\r\n\treducers: {\r\n\t\tonPageLoad: (state, action) => {\r\n\t\t\t/*\r\n\t\t\t\twhen page loads, first of all we need to check if we are logged in or not\r\n\t\t\t*/\r\n\t\t\tlet activeModule;\r\n\t\t\t// if not logged in\r\n\t\t\tif (!action.payload.success) {\r\n\t\t\t\tcookies.set('activeModule', nav.modules.login);\r\n\t\t\t\tactiveModule = nav.modules.login;\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tloading: false,\r\n\t\t\t\t\tloggedIn: false,\r\n\t\t\t\t\tactiveModule,\r\n\t\t\t\t\tuserData: {}\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\t// if logged in\r\n\t\t\tactiveModule = cookies.get('activeModule');\r\n\r\n\t\t\tif (!activeModule) {\r\n\t\t\t\tcookies.set('activeModule', nav.modules.video);\r\n\t\t\t\tactiveModule = nav.modules.video;\r\n\t\t\t}\r\n\r\n\t\t\tlet { name, email, admin, key, bucketFolder } = action.payload;\r\n\t\t\tif (activeModule === nav.modules.user && !admin) {\r\n\t\t\t\tactiveModule = nav.modules.video;\r\n\t\t\t\tcookies.set('activeModule', nav.modules.video);\r\n\t\t\t}\r\n\r\n\t\t\tif (activeModule === nav.modules.campaign && admin) {\r\n\t\t\t\tactiveModule = nav.modules.video;\r\n\t\t\t\tcookies.set('activeModule', nav.modules.video);\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tloading: false,\r\n\t\t\t\tloggedIn: true,\r\n\t\t\t\tactiveModule,\r\n\t\t\t\tuserData: {\r\n\t\t\t\t\tname,\r\n\t\t\t\t\temail,\r\n\t\t\t\t\tadmin,\r\n\t\t\t\t\tkey,\r\n\t\t\t\t\tbucketFolder\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tonLogin: (state, action) => {\r\n\t\t\tif (!action.payload.success) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tloading: false,\r\n\t\t\t\t\tloggedIn: false,\r\n\t\t\t\t\tuserData: {}\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tlet { name, email, admin, key, bucketFolder } = action.payload;\r\n\t\t\tlet activeModule = admin ? nav.modules.user : nav.modules.campaign;\r\n\t\t\tcookies.set('activeModule', activeModule);\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tloading: false,\r\n\t\t\t\tloggedIn: true,\r\n\t\t\t\tactiveModule,\r\n\t\t\t\tuserData: {\r\n\t\t\t\t\tname,\r\n\t\t\t\t\temail,\r\n\t\t\t\t\tadmin,\r\n\t\t\t\t\tkey,\r\n\t\t\t\t\tbucketFolder\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tonLogout: (state, action) => {\r\n\t\t\tif (action.payload.success) {\r\n\t\t\t\tcookies.set('activeModule', nav.modules.login);\r\n\t\t\t\treturn {\r\n\t\t\t\t\tloading: false,\r\n\t\t\t\t\tloggedIn: false,\r\n\t\t\t\t\tactiveModule: null,\r\n\t\t\t\t\tuserFilter: filter.userFilters.All,\r\n\t\t\t\t\tcampaignFilter: filter.campaignFilters.All,\r\n\t\t\t\t\tuserData: {\r\n\t\t\t\t\t\tname: null,\r\n\t\t\t\t\t\temail: null,\r\n\t\t\t\t\t\tadmin: false,\r\n\t\t\t\t\t\tkey: null,\r\n\t\t\t\t\t\tbucketFolder: null\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn state;\r\n\t\t},\r\n\r\n\t\tonNevigate: (state, action) => {\r\n\t\t\t// validate payload maybe\r\n\t\t\tif (!nav.validate(action.payload.to))\r\n\t\t\t\treturn state;\r\n\t\t\t// validate admin rights\r\n\t\t\tif (state.admin && !nav.validateAdminRight(action.payload.to))\r\n\t\t\t\treturn state;\r\n\r\n\t\t\tlet activeModule = action.payload.to;\r\n\t\t\tcookies.set('activeModule', activeModule);\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tactiveModule\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tonFetchUsers: (state, action) => {\r\n\t\t\tif (!action.payload.success) {\r\n\t\t\t\treturn state;\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tuserPoolData: action.payload.users\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tonUserFilter: (state, action) => {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tuserFilter: action.payload.filter\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tonVideoFilter: (state, action) => {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\talbumUrl: action.payload.filter,\r\n\t\t\t\talbumName: action.payload.name\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tonCampaignFilter: (state, action) => {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcampaignFilter: action.payload.filter\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tonFetchCampaigns: (state, action) => {\r\n\t\t\tif (!action.payload.success) {\r\n\t\t\t\treturn state;\r\n\t\t\t}\r\n\r\n\t\t\tconst campaignList =\r\n\t\t\t\tstate.userData.admin ?\r\n\t\t\t\t\t// admin part\r\n\t\t\t\t\taction.payload.campaigns.map(\t\t// map on user\r\n\t\t\t\t\t\t(userCampaignData) => {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tname: userCampaignData.user,\r\n\t\t\t\t\t\t\t\tcampaigns: userCampaignData.campaigns.map(\t\t// map on user's campaigns\r\n\t\t\t\t\t\t\t\t\t(campaignData) => {\r\n\t\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t\tcampaignName: campaignData.name,\r\n\t\t\t\t\t\t\t\t\t\t\tcampaignUrl: campaignData.campaignURL\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t) :\r\n\t\t\t\t\t// user part\r\n\t\t\t\t\taction.payload.campaigns;\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcampaignList\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tonFetchVideoList: (state, action) => {\r\n\t\t\tif (!action.payload.success) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tloading: false\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tloading: false,\r\n\t\t\t\talbumList: action.payload.videos\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tonRemoveVideo: (state, action) => {\r\n\t\t\tif (!action.payload.success) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tloading: false\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tloading: false,\r\n\t\t\t\talbumList: state.albumList.filter((album) => album.key !== action.payload.videoKey)\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tonSelectAlbum: (state, action) => {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\talbumName: action.payload.albumName\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tonFetchVideoUrl: (state, action) => {\r\n\t\t\tif (!action.payload.success) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\tloading: false\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tloading: false,\r\n\t\t\t\tvideoUrl: action.payload.videoUrl\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tonClearVideoUrl: (state, action) => {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tloading: false\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tonWaitAction: (state, action) => {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tloading: true\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n\r\nexport const { onPageLoad, onLogin, onLogout, onFetchUsers, onNevigate, onExistingUserCheck } = slice.actions;\r\nexport const { onFetchCampaigns, onFetchVideoList, onFetchVideoUrl, onRemoveVideo, onClearVideoUrl, onSelectAlbum } = slice.actions;\r\nexport const { onCampaignFilter, onVideoFilter, onUserFilter } = slice.actions;\r\nexport const { onWaitAction } = slice.actions;\r\nexport default slice.reducer;\r\n\r\n// Action creators\r\n// const baseUrl = 'http://localhost:5000';\r\nconst baseUrl = 'http://clients.patronish.com:4000';\r\n\r\nconst usersUrl = baseUrl + '/users';\r\nconst loginUrl = usersUrl + '/login';\r\nconst otpUrl = usersUrl + '/otp';\r\nconst passResetUrl = usersUrl + '/passwordReset';\r\nconst registerUrl = usersUrl + '/register';\r\nconst campaignsUrl = baseUrl + '/campaigns';\r\n\r\nconst pageLoadUrl = usersUrl + '/getSessionUser';\r\nconst logoutUrl = usersUrl + '/logout';\r\nconst fetchUsersUrl = usersUrl + '/getAllUsers';\r\nconst updateUserUrl = usersUrl + '/updateUser';\r\nconst removeUserUrl = usersUrl + '/removeUser';\r\nconst addUserUrl = usersUrl + '/addUser';\r\nconst existingUserUrl = usersUrl + '/userExists';\r\n\r\nconst headers = { 'Content-Type': 'application/json' };\r\nconst methods = {\r\n\tget: 'GET',\r\n\tput: 'PUT',\r\n\tpost: 'POST',\r\n\tdelete: 'DELETE'\r\n}\r\n\r\n// login, register, password-reset and session\r\nexport const loginAction = (email, password, cb) => apiCall({\r\n\turl: loginUrl,\r\n\tcallParams: {\r\n\t\tmethod: methods.post,\r\n\t\theaders,\r\n\t\tcredentials: 'include',\r\n\t\tbody: JSON.stringify({\r\n\t\t\temail,\r\n\t\t\tpassword\r\n\t\t})\r\n\t},\r\n\tcb,\r\n\tonSuccess: onLogin.type,\r\n\tonFailure: onLogin.type\r\n});\r\n\r\nexport const registerAction = (newUser, cb) => apiCall({\r\n\turl: registerUrl,\r\n\tcallParams: {\r\n\t\tmethod: methods.post,\r\n\t\theaders,\r\n\t\tcredentials: 'include',\r\n\t\tbody: JSON.stringify({\r\n\t\t\tnewUser\r\n\t\t})\r\n\t},\r\n\tcb\r\n});\r\n\r\nexport const otpAction = (email, cb) => apiCall({\r\n\turl: otpUrl + \"/\" + email,\r\n\tcallParams: {\r\n\t\tmethod: methods.get,\r\n\t\theaders,\r\n\t\tcredentials: 'include'\r\n\t},\r\n\tcb\r\n});\r\n\r\nexport const passwordResetAction = (email, otp, password, cb) => apiCall({\r\n\turl: passResetUrl,\r\n\tcallParams: {\r\n\t\tmethod: methods.post,\r\n\t\theaders,\r\n\t\tcredentials: 'include',\r\n\t\tbody: JSON.stringify({\r\n\t\t\temail,\r\n\t\t\totp,\r\n\t\t\tpassword\r\n\t\t})\r\n\t},\r\n\tcb\r\n});\r\n\r\nexport const pageLoadAction = () => apiCall({\r\n\turl: pageLoadUrl,\r\n\tcallParams: {\r\n\t\tmethod: methods.get,\r\n\t\theaders,\r\n\t\tcredentials: 'include'\r\n\t},\r\n\tonSuccess: onPageLoad.type,\r\n\tonFailure: onPageLoad.type\r\n});\r\n\r\nexport const logoutAction = () => apiCall({\r\n\turl: logoutUrl,\r\n\tcallParams: {\r\n\t\tmethod: methods.post,\r\n\t\theaders,\r\n\t\tcredentials: 'include'\r\n\t},\r\n\tonSuccess: onLogout.type,\r\n\tonFailure: onLogout.type\r\n});\r\n\r\n// users\r\nexport const fetchUsersAction = () => apiCall({\r\n\turl: fetchUsersUrl,\r\n\tcallParams: {\r\n\t\tmethod: methods.get,\r\n\t\theaders,\r\n\t\tcredentials: 'include'\r\n\t},\r\n\tonSuccess: onFetchUsers.type,\r\n\tonFailure: onFetchUsers.type\r\n});\r\n\r\nexport const updateUserAction = (userEmail, updatedUser) => apiCall({\r\n\turl: updateUserUrl,\r\n\tcallParams: {\r\n\t\tmethod: methods.post,\r\n\t\theaders,\r\n\t\tcredentials: 'include',\r\n\t\tbody: JSON.stringify({\r\n\t\t\tupdatedUser,\r\n\t\t\tuserEmail\r\n\t\t})\r\n\t},\r\n\tonSuccess: onFetchUsers.type,\r\n\tonFailure: onFetchUsers.type\r\n});\r\n\r\nexport const removeUserAction = (removedUser) => apiCall({\r\n\turl: removeUserUrl,\r\n\tcallParams: {\r\n\t\tmethod: methods.post,\r\n\t\theaders,\r\n\t\tcredentials: 'include',\r\n\t\tbody: JSON.stringify({\r\n\t\t\tremovedUser\r\n\t\t})\r\n\t},\r\n\tonSuccess: onFetchUsers.type,\r\n\tonFailure: onFetchUsers.type\r\n});\r\n\r\nexport const addUserAction = (newUser, cb) => apiCall({\r\n\turl: addUserUrl,\r\n\tcallParams: {\r\n\t\tmethod: methods.post,\r\n\t\theaders,\r\n\t\tcredentials: 'include',\r\n\t\tbody: JSON.stringify({\r\n\t\t\tnewUser\r\n\t\t})\r\n\t},\r\n\tcb,\r\n\tonSuccess: onFetchUsers.type\r\n});\r\n\r\nexport const existingUserAction = (email, cb) => {\r\n\tconst existingUserCheckURL = existingUserUrl + '/' + email;\r\n\treturn apiCall({\r\n\t\turl: existingUserCheckURL,\r\n\t\tcallParams: {\r\n\t\t\tmethod: methods.get,\r\n\t\t\theaders,\r\n\t\t\tcredentials: 'include'\r\n\t\t},\r\n\t\tcb\r\n\t});\r\n}\r\n\r\n// navigation and filtering\r\nexport const navigate = (to) => onNevigate({ to });\r\n\r\nexport const userFilter = (filter) => onUserFilter({ filter });\r\n\r\nexport const campaignFilter = (filter) => onCampaignFilter({ filter });\r\n\r\nexport const videoFilter = (filter, name) => onVideoFilter({ filter, name });\r\n\r\nexport const setActiveAlbumName = (albumName) => onSelectAlbum({ albumName });\r\n\r\nexport const enableOverlay = () => onWaitAction({});\r\n\r\n\r\n// video module loading\r\nexport const fetchVideoListAction = (albumUrl) => {\r\n\tconst fetchVideoListUrl = campaignsUrl + '/getCampaignVideosList/' + albumUrl;\r\n\treturn apiCall({\r\n\t\turl: fetchVideoListUrl,\r\n\t\tcallParams: {\r\n\t\t\tmethod: methods.get,\r\n\t\t\theaders,\r\n\t\t\tcredentials: 'include'\r\n\t\t},\r\n\t\tonSuccess: onFetchVideoList.type,\r\n\t\tonFailure: onFetchVideoList.type\r\n\t});\r\n}\r\n\r\nexport const removeVideoAction = (videoKey) => {\r\n\tconst removeVideoURL = campaignsUrl + '/removeCampaignVideo/' + videoKey.replace(\"/\", \"$\");\r\n\treturn apiCall({\r\n\t\turl: removeVideoURL,\r\n\t\tcallParams: {\r\n\t\t\tmethod: methods.delete,\r\n\t\t\theaders,\r\n\t\t\tcredentials: 'include'\r\n\t\t},\r\n\t\tonSuccess: onRemoveVideo.type,\r\n\t\tonFailure: onRemoveVideo.type\r\n\t});\r\n}\r\n\r\nexport const clearVideoAction = () => onClearVideoUrl({});\r\n\r\n// campaigns\r\nexport const fetchCampaignAction = (userEmail) => {\r\n\tconst fetchCampaignUrl = campaignsUrl + '/getUserCampaigns/' + userEmail;\r\n\treturn apiCall({\r\n\t\turl: fetchCampaignUrl,\r\n\t\tcallParams: {\r\n\t\t\tmethod: methods.get,\r\n\t\t\theaders,\r\n\t\t\tcredentials: 'include'\r\n\t\t},\r\n\t\tonSuccess: onFetchCampaigns.type,\r\n\t\tonFailure: onFetchCampaigns.type\r\n\t});\r\n}\r\n\r\nexport const updateCampaignAction = (campaignURL, updatedCampaign) => {\r\n\tconst updateCampaignUrl = campaignsUrl + '/updateCampaign/' + campaignURL;\r\n\treturn apiCall({\r\n\t\turl: updateCampaignUrl,\r\n\t\tcallParams: {\r\n\t\t\tmethod: methods.put,\r\n\t\t\theaders,\r\n\t\t\tcredentials: 'include',\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tupdatedCampaign\r\n\t\t\t})\r\n\t\t},\r\n\t\tonSuccess: onFetchCampaigns.type,\r\n\t\tonFailure: onFetchCampaigns.type\r\n\t});\r\n}\r\n\r\nexport const removeCampaignAction = (campaignURL, cb) => {\r\n\tconst removeCampaignUrl = campaignsUrl + '/removeCampaign/' + campaignURL;\r\n\treturn apiCall({\r\n\t\turl: removeCampaignUrl,\r\n\t\tcallParams: {\r\n\t\t\tmethod: methods.delete,\r\n\t\t\theaders,\r\n\t\t\tcredentials: 'include'\r\n\t\t},\r\n\t\tcb\r\n\t});\r\n}\r\n\r\nexport const addCampaignAction = (newCampaign, cb) => {\r\n\tconst addCampaignUrl = campaignsUrl + '/addCampaign';\r\n\treturn apiCall({\r\n\t\turl: addCampaignUrl,\r\n\t\tcallParams: {\r\n\t\t\tmethod: methods.post,\r\n\t\t\theaders,\r\n\t\t\tcredentials: 'include',\r\n\t\t\tbody: JSON.stringify({\r\n\t\t\t\tnewCampaign\r\n\t\t\t})\r\n\t\t},\r\n\t\tcb,\r\n\t\tonSuccess: onFetchCampaigns.type\r\n\t});\r\n}\r\n\r\nexport const existingCampaignAction = (campaignURL, cb) => {\r\n\tconst existingCampaignCheckURL = campaignsUrl + '/campaignURLExists/' + campaignURL;\r\n\treturn apiCall({\r\n\t\turl: existingCampaignCheckURL,\r\n\t\tcallParams: {\r\n\t\t\tmethod: methods.get,\r\n\t\t\theaders,\r\n\t\t\tcredentials: 'include'\r\n\t\t},\r\n\t\tcb\r\n\t});\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { connect } from 'react-redux';\r\nimport { MDBNavbar, MDBNavbarBrand, MDBNavbarNav, MDBNavItem, MDBLink, MDBIcon, MDBNavbarToggler, MDBCollapse, MDBContainer } from \"mdbreact\";\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\nimport { logoutAction, navigate } from '../../store/session';\r\nimport * as nav from '../../store/globals/nav';\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tusername: state.userData.name,\r\n\t\tadmin: state.userData.admin,\r\n\t\tactiveModule: state.activeModule\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn {\r\n\t\tlogout: () => dispatch(logoutAction()),\r\n\t\tnavigate: (to) => dispatch(navigate(to))\r\n\t}\r\n}\r\n\r\nclass NavbarPage extends Component {\r\n\tstate = {\r\n\t\tcollapseID: \"\"\r\n\t}\r\n\r\n\r\n\ttoggleCollapse = collapseID => () => this.setState(prevState => ({ collapseID: prevState.collapseID !== collapseID ? collapseID : \"\" }));\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Router>\r\n\r\n\t\t\t<MDBContainer>\r\n\t\t\t\t<MDBNavbar color=\"blue\" dark expand=\"md\" scrolling fixed=\"top\">\r\n\t\t\t\t\t<MDBNavbarBrand>\r\n\t\t\t\t\t\t<strong className=\"white-text\">Patronish</strong>\r\n\t\t\t\t\t</MDBNavbarBrand>\r\n\t\t\t\t\t<MDBNavbarToggler onClick={this.toggleCollapse(\"navbarCollapse\")} />\r\n\t\t\t\t\t<MDBCollapse id=\"navbarCollapse\" isOpen={this.state.collapseID} navbar>\r\n\t\t\t\t\t\t<MDBNavbarNav left>\r\n\t\t\t\t\t\t\t<MDBNavItem active={ this.props.activeModule === nav.modules.user } style={{display: this.props.admin ? \"\":\"none\"}}>\r\n\t\t\t\t\t\t\t\t<MDBLink to='' onClick={() => this.props.navigate(nav.modules.user)} link>\r\n\t\t\t\t\t\t\t\t\tUsers\r\n\t\t\t\t\t\t\t\t</MDBLink>\r\n\t\t\t\t\t\t\t</MDBNavItem>\r\n\t\t\t\t\t\t\t<MDBNavItem active={ this.props.activeModule === nav.modules.video }>\r\n\t\t\t\t\t\t\t\t<MDBLink to='' onClick={() => this.props.navigate(nav.modules.video)} link>\r\n\t\t\t\t\t\t\t\t\tVideos\r\n\t\t\t\t\t\t\t\t</MDBLink>\r\n\t\t\t\t\t\t\t</MDBNavItem>\r\n\t\t\t\t\t\t\t<MDBNavItem active={ this.props.activeModule === nav.modules.campaign } style={{display: this.props.admin ? \"none\":\"\"}}>\r\n\t\t\t\t\t\t\t\t<MDBLink to='' onClick={() => this.props.navigate(nav.modules.campaign)} link>\r\n\t\t\t\t\t\t\t\t\tCampaign\r\n\t\t\t\t\t\t\t\t</MDBLink>\r\n\t\t\t\t\t\t\t</MDBNavItem>\r\n\t\t\t\t\t\t</MDBNavbarNav>\r\n\t\t\t\t\t\t<MDBNavbarNav right>\r\n\t\t\t\t\t\t\t<MDBNavItem>\r\n\t\t\t\t\t\t\t\t<MDBLink to='' onClick={ this.props.logout } link>\r\n\t\t\t\t\t\t\t\t\tLogout\r\n\t\t\t\t\t\t\t\t</MDBLink>\r\n\t\t\t\t\t\t\t</MDBNavItem>\r\n\t\t\t\t\t\t\t<MDBNavItem>\r\n\r\n\t\t\t\t\t\t\t\t<MDBLink to='' active={false} onClick={() => {console.log('nav link click event')}} link>\r\n\t\t\t\t\t\t\t\t\t<MDBIcon far icon=\"user\" />\r\n\t\t\t\t\t\t\t\t\t{ this.props.username }\r\n\t\t\t\t\t\t\t\t</MDBLink>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t</MDBNavItem>\r\n\t\t\t\t\t\t</MDBNavbarNav>\r\n\t\t\t\t\t</MDBCollapse>\r\n\t\t\t\t</MDBNavbar>\r\n\t\t\t</MDBContainer>\r\n\r\n\t\t\t</Router>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(NavbarPage);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport * as nav from '../../store/globals/nav';\r\nimport * as filter from '../../store/globals/filter';\r\nimport { fetchCampaignAction, userFilter, fetchVideoListAction, campaignFilter, setActiveAlbumName, onWaitAction } from '../../store/session';\r\nimport { MDBLink, MDBNavItem } from \"mdbreact\";\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\nimport { ProSidebar, Menu, MenuItem, SubMenu } from 'react-pro-sidebar';\r\nimport 'react-pro-sidebar/dist/css/styles.css';\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tactiveModule: state.activeModule,\r\n\t\tuserMenu: state.userFilter,\r\n\t\tcampaignList: state.campaignList,\r\n\t\tcampaignMenu: state.campaignFilter,\r\n\t\tuserEmail: state.userData.email,\r\n\t\tisAdmin: state.userData.admin\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn {\r\n\t\tfetchCampaigns: (email) => dispatch(fetchCampaignAction(email)),\r\n\t\tfilterUsers: (filter) => dispatch(userFilter(filter)),\r\n\t\tfilterVideos: (campaignUrl) => dispatch(fetchVideoListAction(campaignUrl)),\r\n\t\tfilterCampaigns: (filter) => dispatch(campaignFilter(filter)),\r\n\t\tsetAlbumName: (albumName) => dispatch(setActiveAlbumName(albumName)),\r\n\t\toverlay: () => dispatch(onWaitAction())\r\n\t}\r\n}\r\n\r\nclass Sidebar extends Component {\r\n\r\n\tcomponentDidMount() {\r\n\t\tif (!this.props.campaignList) {\r\n\t\t\tif (!this.props.isAdmin) {\r\n\t\t\t\tthis.props.fetchCampaigns(this.props.userEmail);\r\n\t\t\t} else {\r\n\t\t\t\tthis.props.fetchCampaigns(\"*\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgenerateUserVideoMenu() {\r\n\t\tconst campaignPlaylists = this.props.campaignList ? this.props.campaignList.map(\r\n\t\t\t(campaign) => {\r\n\t\t\t\treturn <MDBLink to='' onClick={() => { this.props.overlay(); this.props.setAlbumName(campaign.name); this.props.filterVideos(campaign.campaignURL); }} link>\r\n\t\t\t\t\t{campaign.name}\r\n\t\t\t\t</MDBLink>\r\n\t\t\t}\r\n\t\t) : [];\r\n\r\n\t\tconst videoMenu = <Menu>\r\n\t\t\t<SubMenu title=\"Video Folders\">\r\n\t\t\t\t<MDBNavItem active={this.props.videoMenu === filter.videoFilters.videostuff}>\r\n\t\t\t\t\t{campaignPlaylists}\r\n\t\t\t\t</MDBNavItem>\r\n\t\t\t</SubMenu>\r\n\t\t</Menu>;\r\n\t\treturn videoMenu;\r\n\t}\r\n\r\n\tgenerateAdminVideoMenu() {\r\n\t\tconst userCampaignPlaylists = this.props.campaignList ? this.props.campaignList.map(\r\n\t\t\t// this is (user name, array of campaigns)\r\n\t\t\t(campaign) => {\r\n\t\t\t\tconst campaignPlaylists =\r\n\t\t\t\t\tcampaign.campaigns.map((campaign) => {\r\n\t\t\t\t\t\treturn <MDBLink to='' onClick={() => { this.props.overlay(); this.props.setAlbumName(campaign.campaignName); this.props.filterVideos(campaign.campaignUrl); }} link>\r\n\t\t\t\t\t\t\t{campaign.campaignName}\r\n\t\t\t\t\t\t</MDBLink>\r\n\t\t\t\t\t});\r\n\t\t\t\treturn<SubMenu title={campaign.name}>\r\n\t\t\t\t\t\t\t<MDBNavItem active={this.props.videoMenu === filter.videoFilters.videostuff}>\r\n\t\t\t\t\t\t\t\t{campaignPlaylists}\r\n\t\t\t\t\t\t\t</MDBNavItem>\r\n\t\t\t\t\t\t</SubMenu>;\r\n\t\t\t}\r\n\t\t) : [];\r\n\r\n\t\tconst videoMenu = <Menu>\r\n\t\t\t\t{userCampaignPlaylists}\r\n\t\t</Menu>;\r\n\t\treturn videoMenu;\r\n\t}\r\n\r\n\trender() {\r\n\t\t// user's menu\r\n\t\tconst userMenu = <Menu>\r\n\t\t\t<SubMenu defaultOpen={true} title=\"Filter Users\">\r\n\t\t\t\t<MDBNavItem active={this.props.userMenu === filter.userFilters.All}>\r\n\t\t\t\t\t<MDBLink to='' onClick={() => this.props.filterUsers(filter.userFilters.All)} link>\r\n\t\t\t\t\t\tAll Users\r\n\t\t\t\t\t</MDBLink>\r\n\t\t\t\t</MDBNavItem>\r\n\t\t\t\t<MDBNavItem active={this.props.userMenu === filter.userFilters.Active}>\r\n\t\t\t\t\t<MDBLink to='' onClick={() => this.props.filterUsers(filter.userFilters.Active)} link>\r\n\t\t\t\t\t\tActive Users\r\n\t\t\t\t\t</MDBLink>\r\n\t\t\t\t</MDBNavItem>\r\n\t\t\t\t<MDBNavItem active={this.props.userMenu === filter.userFilters.Inactive}>\r\n\t\t\t\t\t<MDBLink to='' onClick={() => this.props.filterUsers(filter.userFilters.Inactive)} link>\r\n\t\t\t\t\t\tInactive Users\r\n\t\t\t\t\t</MDBLink>\r\n\t\t\t\t</MDBNavItem>\r\n\t\t\t</SubMenu>\r\n\t\t\t<MDBNavItem active={this.props.userMenu === filter.userFilters.New}>\r\n\t\t\t\t<MDBLink to='' onClick={() => this.props.filterUsers(filter.userFilters.New)} link>\r\n\t\t\t\t\tAdd New User\r\n\t\t\t\t</MDBLink>\r\n\t\t\t</MDBNavItem>\r\n\t\t</Menu>\r\n\t\t// console.log(\"campaign list here: \", this.props.campaignList);\r\n\t\t// video menu: (non-admin)\r\n\t\tconst videoMenu = this.props.isAdmin ?\r\n\t\t\tthis.generateAdminVideoMenu() :\r\n\t\t\tthis.generateUserVideoMenu();\r\n\r\n\t\t// campaign's menu\r\n\t\tconst campaignMenu = <Menu>\r\n\t\t\t<SubMenu defaultOpen={true} title=\"Filter Campaigns\">\r\n\t\t\t\t<MDBNavItem active={this.props.campaignMenu === filter.campaignFilters.All}>\r\n\t\t\t\t\t<MDBLink to='' onClick={() => this.props.filterCampaigns(filter.campaignFilters.All)} link>\r\n\t\t\t\t\t\tAll Campaigns\r\n\t\t\t\t\t</MDBLink>\r\n\t\t\t\t</MDBNavItem>\r\n\t\t\t\t<MDBNavItem active={this.props.campaignMenu === filter.campaignFilters.Active}>\r\n\t\t\t\t\t<MDBLink to='' onClick={() => this.props.filterCampaigns(filter.campaignFilters.Active)} link>\r\n\t\t\t\t\t\tActive Campaigns\r\n\t\t\t\t\t</MDBLink>\r\n\t\t\t\t</MDBNavItem>\r\n\t\t\t\t<MDBNavItem active={this.props.campaignMenu === filter.campaignFilters.Past}>\r\n\t\t\t\t\t<MDBLink to='' onClick={() => this.props.filterCampaigns(filter.campaignFilters.Past)} link>\r\n\t\t\t\t\t\tPast Campaigns\r\n\t\t\t\t\t</MDBLink>\r\n\t\t\t\t</MDBNavItem>\r\n\t\t\t</SubMenu>\r\n\t\t\t<MDBNavItem active={this.props.campaignMenu === filter.campaignFilters.New}>\r\n\t\t\t\t<MDBLink to='' onClick={() => this.props.filterCampaigns(filter.campaignFilters.New)} link>\r\n\t\t\t\t\tAdd New Campaign\r\n\t\t\t\t</MDBLink>\r\n\t\t\t</MDBNavItem>\r\n\t\t</Menu>\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"\" style={{ position: \"fixed\", bottom: 0, left: 0, top: 0 }}>\r\n\t\t\t\t<Router>\r\n\t\t\t\t\t<ProSidebar width={270}>\r\n\t\t\t\t\t\t<Menu><MenuItem></MenuItem><MenuItem></MenuItem><MenuItem></MenuItem></Menu>\r\n\t\t\t\t\t\t{this.props.activeModule === nav.modules.user ? userMenu : <></>}\r\n\t\t\t\t\t\t{this.props.activeModule === nav.modules.video ? videoMenu : <></>}\r\n\t\t\t\t\t\t{this.props.activeModule === nav.modules.campaign ? campaignMenu : <></>}\r\n\t\t\t\t\t</ProSidebar>\r\n\t\t\t\t</Router>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Sidebar);","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nfunction getArrowTranslate(layerSide) {\r\n  let x = \"-50%\";\r\n  let y = 0;\r\n\r\n  const OFFSET = 3.5;\r\n  if (layerSide === \"left\") {\r\n    x = -OFFSET + \"px\";\r\n    y = \"-50%\";\r\n  } else if (layerSide === \"right\") {\r\n    x = OFFSET + \"px\";\r\n    y = \"-50%\";\r\n  }\r\n\r\n  const rotation = {\r\n    top: 180,\r\n    right: -90,\r\n    left: 90,\r\n    bottom: 0\r\n  };\r\n\r\n  // @ts-ignore\r\n  return `translate(${x}, ${y}) rotate(${rotation[layerSide]}deg)`;\r\n}\r\n\r\nconst outTransform = {\r\n  top: { x: 0, y: -20 },\r\n  left: { x: -20, y: 0 },\r\n  bottom: { x: 0, y: 20 },\r\n  right: { x: 20, y: 0 }\r\n};\r\n\r\nconst MenuBase = styled(motion.ul)`\r\n  transition: color 0.15s, background-color 0.15s, width 0.25s ease-in-out;\r\n  position: absolute;\r\n  width: 160px;\r\n  padding: 4px 0px;\r\n  list-style: none;\r\n  background-clip: padding-box;\r\n  border-radius: 4px;\r\n  box-shadow: 0 1px 15px rgba(27, 31, 35, 0.15);\r\n  margin: 0;\r\n  background-color: white;\r\n  color: #333;\r\n  border: 1px solid rgba(27, 31, 35, 0.15);\r\n`;\r\n\r\nconst Arrow = props => (\r\n  <svg width={14} height={7} {...props}>\r\n    <g fill=\"none\" fillRule=\"evenodd\">\r\n      <path\r\n        fill=\"#CDCFD0\"\r\n        d=\"M7 .07v1.428l-5.55 5.5L0 6.982zM7 .07v1.428l5.55 5.5L14 6.982z\"\r\n      />\r\n      <path fill=\"#FFF\" d=\"M1.45 7L7 1.498 12.55 7z\" />\r\n    </g>\r\n  </svg>\r\n);\r\n\r\nconst Menu = React.forwardRef(function Menu(\r\n  { className, style, arrowStyle, layerSide, children },\r\n  ref\r\n) {\r\n  return (\r\n    <MenuBase\r\n      ref={ref}\r\n      className={className}\r\n      style={style}\r\n      // @ts-ignore\r\n      initial={{ opacity: 0, scale: 0.85, ...outTransform[layerSide] }} // animate from\r\n      animate={{ opacity: 1, scale: 1, x: 0, y: 0 }} // animate to\r\n      // @ts-ignore\r\n      exit={{ opacity: 0, scale: 0.85, ...outTransform[layerSide] }} // animate exit\r\n      transition={{\r\n        type: \"spring\",\r\n        stiffness: 800,\r\n        damping: 35\r\n      }}\r\n    >\r\n      {children}\r\n\r\n      <Arrow\r\n        style={{\r\n          ...arrowStyle,\r\n          position: \"absolute\",\r\n          transformOrigin: \"center\",\r\n          transform: getArrowTranslate(layerSide)\r\n        }}\r\n      />\r\n    </MenuBase>\r\n  );\r\n});\r\n\r\nconst ItemBase = styled.li`\r\n  list-style: none;\r\n  display: block;\r\n  padding: 4px 8px 4px 16px;\r\n  overflow: hidden;\r\n  color: inherit;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n  font-size: 14px;\r\n  line-height: 1.5;\r\n  cursor: pointer;\r\n\r\n  &:hover {\r\n    background-color: #359ed0;\r\n    color: white;\r\n  }\r\n`;\r\n\r\nexport function MenuItem({ className, style, children, ...rest }) {\r\n  return (\r\n    <ItemBase className={className} style={style} {...rest}>\r\n      {children}\r\n    </ItemBase>\r\n  );\r\n}\r\n\r\nexport default Menu;\r\n","import React from 'react';\r\nimport { ToggleLayer } from \"react-laag\";\r\nimport { AnimatePresence } from \"framer-motion\";\r\nimport Menu, { MenuItem } from \"../Dropdown/Menu\";\r\n\r\nexport default function DropdownMenu(props){\r\n\t\r\n\tlet renderLayer = _props => {\r\n\t\tconst menuItems = props.options.map((item) => {\r\n\t\t\treturn <MenuItem onClick={() => { props.callback(item.action,props.id); _props.close();}} key={item.action}>{item.name()}</MenuItem>\r\n\t\t});\r\n\t\treturn (\r\n\t\t\t<AnimatePresence>\r\n\t\t\t\t{_props.isOpen ? (\r\n\t\t\t\t\t<Menu\r\n\t\t\t\t\t\tref={_props.layerProps.ref}\r\n\t\t\t\t\t\tstyle={_props.layerProps.style}\r\n\t\t\t\t\t\tarrowStyle={_props.arrowStyle}\r\n\t\t\t\t\t\tlayerSide={_props.layerSide}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{menuItems}\r\n\t\t\t\t\t</Menu>\r\n\t\t\t\t) : null}\r\n\t\t\t</AnimatePresence>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (<ToggleLayer\r\n\t\tcloseOnOutsideClick\r\n\t\trenderLayer={renderLayer}\r\n\t\tplacement={{\r\n\t\t\tanchor: \"LEFT_TOP\",\r\n\t\t\tautoAdjust: true,\r\n\t\t\tsnapToAnchor: false,\r\n\t\t\ttriggerOffset: 12,\r\n\t\t\tscrollOffset: 16,\r\n\t\t\tpreferX: \"RIGHT\"\r\n\t\t }}>\r\n\t\t\t{props.trigger}\r\n\t</ToggleLayer>);\r\n}","import { MDBBtn, MDBCol, MDBContainer, MDBInput, MDBRow, MDBTable, MDBTableBody, MDBTableHead } from 'mdbreact';\r\nimport React, { Component } from 'react';\r\nimport DropdownMenu from '../Dropdown/DropdownMenu';\r\nimport { connect } from 'react-redux';\r\nimport { fetchUsersAction, updateUserAction, removeUserAction, addUserAction, existingUserAction, userFilter } from '../../store/session';\r\nimport * as filter from '../../store/globals/filter';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tuserData: state.userPoolData,\r\n\t\tuserFilter: state.userFilter\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn {\r\n\t\tfetchUsers: () => dispatch(fetchUsersAction()),\r\n\t\tupdateUser: (email, user) => dispatch(updateUserAction(email, user)),\r\n\t\tremoveUser: (user) => dispatch(removeUserAction(user)),\r\n\t\tcheckUserExists: (email, cb) => dispatch(existingUserAction(email, cb)),\r\n\t\taddUser: (user, cb) => dispatch(addUserAction(user, cb)),\r\n\t\tfilterUsers: (filter) => dispatch(userFilter(filter))\r\n\t}\r\n}\r\n\r\nclass User extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.columns = [\r\n\t\t\t{\r\n\t\t\t\tlabel: '#',\r\n\t\t\t\tfield: 'id'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: 'Company',\r\n\t\t\t\tfield: 'companyName'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: 'User Name',\r\n\t\t\t\tfield: 'contactPersonName'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: 'Email',\r\n\t\t\t\tfield: 'contactPersonEmail'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: 'Active',\r\n\t\t\t\tfield: 'active'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: 'Manage',\r\n\t\t\t\tfield: 'manage'\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\tthis.userManagementActions = {\r\n\t\t\ttoggleActive: 'toggleActive',\r\n\t\t\tremoveUser: 'removeUser',\r\n\t\t\taddUser: 'addUser'\r\n\t\t}\r\n\r\n\t\tthis.state = {\r\n\t\t\trows: [],\r\n\t\t\tactive: false\r\n\t\t\t// ,\r\n\t\t\t// companyName: \"test company\",\r\n\t\t\t// location: \"test location\",\r\n\t\t\t// postCode: \"112233\",\r\n\t\t\t// country: \"test country\",\r\n\t\t\t// contactPersonName: \"test contact name\",\r\n\t\t\t// contactPersonEmail: \"contact@person.email\",\r\n\t\t\t// contactPersonRole: \"test contact role\",\r\n\t\t\t// contactPersonNumber: \"0900123456789\",\r\n\t\t\t// password: \"cellcycle\",\r\n\t\t\t// password_re: \"cellcycle\"\r\n\t\t}\r\n\r\n\t\tthis.manageUser = this.manageUser.bind(this);\r\n\t\tthis.onChange = this.onChange.bind(this);\r\n\t\tthis.resetForm = this.resetForm.bind(this);\r\n\t\tthis.resetForm = this.resetForm.bind(this);\r\n\t\tthis.checkUserExistsResponse = this.checkUserExistsResponse.bind(this);\r\n\t\tthis.addUserResponse = this.addUserResponse.bind(this);\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tif (!this.props.userData)\r\n\t\t\tthis.props.fetchUsers();\r\n\t}\r\n\r\n\tonChange(property, val) {\r\n\t\tthis.setState({\r\n\t\t\t[property]: val\r\n\t\t});\r\n\r\n\t\tconst element = document.getElementById(`${property}_err_msg`);\r\n\t\tif (element){\r\n\t\t\telement.style.display = \"none\";\r\n\t\t\tif(property === 'contactPersonEmail')\r\n\t\t\tdocument.getElementById('contactPersonEmailExists_err_msg').style.display = \"none\";\r\n\t\t}\r\n\t}\r\n\r\n\tcheckUserExistsResponse(response) {\r\n\t\tconsole.log(\"response: \", response);\r\n\t\tif(response.success){\r\n\t\t\tdocument.getElementById('contactPersonEmailExists_err_msg').style.display = \"block\";\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst { companyName, location, postCode, country, employeeSize,\r\n\t\t\tcontactPersonName, contactPersonEmail, contactPersonRole, contactPersonNumber, password, active } = this.state;\r\n\r\n\t\tconst user = {\r\n\t\t\tname: contactPersonName,\r\n\t\t\temail: contactPersonEmail,\r\n\t\t\tpassword,\r\n\t\t\trole: contactPersonRole,\r\n\t\t\tcontact: contactPersonNumber,\r\n\r\n\t\t\tcompany: {\r\n\t\t\t\tname: companyName,\r\n\t\t\t\tlocation,\r\n\t\t\t\tpostCode,\r\n\t\t\t\tcountry,\r\n\t\t\t\temployeeSize: employeeSize ? employeeSize : -1\r\n\t\t\t},\r\n\t\t\tactive\r\n\t\t}\r\n\t\t\r\n\t\tconsole.log('new user: ', user);\r\n\t\tthis.props.addUser(user, this.addUserResponse);\r\n\t}\r\n\r\n\taddUserResponse(response) {\r\n\t\t// wait for further action\r\n\t\tconsole.log(\"response: \", response);\r\n\t\tif(response.success){\r\n\t\t\tif(this.state.active){\r\n\t\t\t\tthis.props.filterUsers(filter.userFilters.Active);\r\n\t\t\t}\r\n\t\t\tif(!this.state.active){\r\n\t\t\t\tthis.props.filterUsers(filter.userFilters.Inactive);\r\n\t\t\t}\r\n\t\t\tthis.props.fetchUsers();\r\n\t\t}\r\n\t}\r\n\r\n\t// user management: [activate/de-activate user]\r\n\tmanageUser(action, email) {\r\n\t\tlet targetUser;\r\n\t\tswitch (action) {\r\n\t\t\tcase this.userManagementActions.toggleActive:\r\n\t\t\t\ttargetUser = { ...this.props.userData.find((user) => user.email === email) };\r\n\t\t\t\ttargetUser.active = !targetUser.active;\r\n\t\t\t\tthis.props.updateUser(email, targetUser);\r\n\t\t\t\treturn;\r\n\r\n\t\t\tcase this.userManagementActions.removeUser:\r\n\t\t\t\ttargetUser = { ...this.props.userData.find((user) => user.email === email) };\r\n\t\t\t\tthis.props.removeUser(targetUser);\r\n\t\t\t\treturn;\r\n\r\n\t\t\tcase this.userManagementActions.addUser:\r\n\t\t\t\tif (!this.state.companyName) {\r\n\t\t\t\t\tdocument.getElementById('companyName_err_msg').style.display = \"block\";\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.state.location) {\r\n\t\t\t\t\tdocument.getElementById('location_err_msg').style.display = \"block\";\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.state.postCode) {\r\n\t\t\t\t\tdocument.getElementById('postCode_err_msg').style.display = \"block\";\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.state.country) {\r\n\t\t\t\t\tdocument.getElementById('country_err_msg').style.display = \"block\";\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.state.contactPersonName) {\r\n\t\t\t\t\tdocument.getElementById('contactPersonName_err_msg').style.display = \"block\";\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.state.contactPersonEmail) {\r\n\t\t\t\t\tdocument.getElementById('contactPersonEmail_err_msg').style.display = \"block\";\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!filter.validateEmail(this.state.contactPersonEmail)) {\r\n\t\t\t\t\tdocument.getElementById('contactPersonEmail_err_msg').style.display = \"block\";\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.props.existingUserCheck) {\r\n\t\t\t\t\t// appropriate message\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.state.contactPersonRole) {\r\n\t\t\t\t\tdocument.getElementById('contactPersonRole_err_msg').style.display = \"block\";\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.state.contactPersonNumber) {\r\n\t\t\t\t\tdocument.getElementById('contactPersonNumber_err_msg').style.display = \"block\";\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.state.password) {\r\n\t\t\t\t\tdocument.getElementById('password_err_msg').style.display = \"block\";\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.state.password !== this.state.password_re) {\r\n\t\t\t\t\tdocument.getElementById('password_re_err_msg').style.display = \"block\";\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.props.checkUserExists(this.state.contactPersonEmail, this.checkUserExistsResponse);\r\n\t\t\t\treturn;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tconsole.log(\"will act as default\");\r\n\t\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\tresetForm() {\r\n\t\tthis.setState({\r\n\t\t\tcompanyName: \"\",\r\n\t\t\tlocation: \"\",\r\n\t\t\tpostCode: \"\",\r\n\t\t\tcountry: \"\",\r\n\t\t\temployeeSize: \"\",\r\n\r\n\t\t\tcontactPersonName: \"\",\r\n\t\t\tcontactPersonEmail: \"\",\r\n\t\t\tcontactPersonRole: \"\",\r\n\t\t\tcontactPersonNumber: \"\",\r\n\r\n\t\t\tpassword: \"\",\r\n\t\t\tpassword_re: \"\",\r\n\r\n\t\t\tactive: false\r\n\t\t});\r\n\t}\r\n\r\n\t/*\r\n\t\tCompany (Name, Location, Post Code, Country, Employees size) - upload logo\r\n\t\tContact Person (Name, Role, email, password, phone nr)\r\n\t*/\r\n\r\n\trender() {\r\n\t\tif (this.props.userFilter === filter.userFilters.All || this.props.userFilter === filter.userFilters.Active || this.props.userFilter === filter.userFilters.Inactive) {\r\n\t\t\tlet rows;\r\n\t\t\tif (this.props.userData) {\r\n\t\t\t\tif (this.props.userData.length > 0) {\r\n\t\t\t\t\tfunction generateMaterialCheckbox(checked) {\r\n\t\t\t\t\t\treturn <MDBBtn size=\"sm\" rounded color={checked ? \"success\" : \"danger\"}>{checked ? \"Active\" : \"Inactive\"}</MDBBtn>;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet idCounter = 1;\r\n\t\t\t\t\trows = this.props.userData.map((user) => {\r\n\t\t\t\t\t\tif (this.props.userFilter === filter.userFilters.Active && !user.active)\r\n\t\t\t\t\t\t\treturn {};\r\n\t\t\t\t\t\tif (this.props.userFilter === filter.userFilters.Inactive && user.active)\r\n\t\t\t\t\t\t\treturn {};\r\n\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t'id': idCounter++,\r\n\t\t\t\t\t\t\t'companyName': user.company.name,\r\n\t\t\t\t\t\t\t'contactPersonName': user.name,\r\n\t\t\t\t\t\t\t'contactPersonEmail': user.email,\r\n\t\t\t\t\t\t\t'active': generateMaterialCheckbox(user.active),\r\n\t\t\t\t\t\t\t'action': <DropdownMenu\r\n\t\t\t\t\t\t\t\ttrigger={\r\n\t\t\t\t\t\t\t\t\t({ isOpen, triggerRef, toggle }) =>\r\n\t\t\t\t\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-outline-primary\" data-ripple-color=\"dark\"\r\n\t\t\t\t\t\t\t\t\t\t\tref={triggerRef}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={toggle}>\r\n\t\t\t\t\t\t\t\t\t\t\tManage User\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</button>}\r\n\t\t\t\t\t\t\t\tid={user.email}\r\n\t\t\t\t\t\t\t\toptions={[\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tname: () => user.active ? \"Deactivate User\" : \"Activate User\",\r\n\t\t\t\t\t\t\t\t\t\taction: this.userManagementActions.toggleActive,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tname: () => \"Remove User\",\r\n\t\t\t\t\t\t\t\t\t\taction: this.userManagementActions.removeUser,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\t\tcallback={this.manageUser}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<MDBTable btn>\r\n\t\t\t\t\t<MDBTableHead columns={this.columns} />\r\n\t\t\t\t\t<MDBTableBody rows={rows} />\r\n\t\t\t\t\t{/* <MDBTableBody rows={rows_outline_btn} /> */}\r\n\t\t\t\t</MDBTable>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif (this.props.userFilter === filter.userFilters.New) {\r\n\t\t\treturn (\r\n\t\t\t\t<form className=\"needs-validation\" onSubmit={(e) => { e.preventDefault(); this.manageUser(this.userManagementActions.addUser); }}>\r\n\t\t\t\t\t<MDBContainer>\r\n\t\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t\t<MDBCol md=\"12\">\r\n\t\t\t\t\t\t\t\t<p id=\"x\" className=\"h5 text-center mb-4\">Company</p>\r\n\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\tlabel=\"Company Name\"\r\n\t\t\t\t\t\t\t\t\tgroup\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.companyName}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('companyName', e.target.value)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<div id=\"companyName_err_msg\" className=\"invalid-feedback\">Required</div>\r\n\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\tlabel=\"Location\"\r\n\t\t\t\t\t\t\t\t\tgroup\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.location}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('location', e.target.value)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<div id=\"location_err_msg\" className=\"invalid-feedback\">Required</div>\r\n\t\t\t\t\t\t\t\t{/* log goes here */}\r\n\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t</MDBRow>\r\n\r\n\t\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t\t<MDBCol md=\"4\">\r\n\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\tlabel=\"Post Code\"\r\n\t\t\t\t\t\t\t\t\tgroup type=\"number\"\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.postCode}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('postCode', e.target.value)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<div id=\"postCode_err_msg\" className=\"invalid-feedback\">Required</div>\r\n\r\n\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t\t<MDBCol md=\"4\">\r\n\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\tlabel=\"Country\"\r\n\t\t\t\t\t\t\t\t\tgroup\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.country}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('country', e.target.value)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<div id=\"country_err_msg\" className=\"invalid-feedback\">Required</div>\r\n\r\n\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t\t<MDBCol md=\"4\">\r\n\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\tlabel=\"Employee Size\"\r\n\t\t\t\t\t\t\t\t\tgroup\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.employeeSize}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('employeeSize', e.target.value)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t</MDBRow>\r\n\r\n\t\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t\t<MDBCol>\r\n\t\t\t\t\t\t\t\t<p id=\"x\" className=\"h5 text-center mb-4 mt-3\">Contact Person (Account Holder)</p>\r\n\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\tlabel=\"Name\"\r\n\t\t\t\t\t\t\t\t\tgroup\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.contactPersonName}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('contactPersonName', e.target.value)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<div id=\"contactPersonName_err_msg\" className=\"invalid-feedback\">Required</div>\r\n\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t</MDBRow>\r\n\r\n\t\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t\t<MDBCol md=\"4\">\r\n\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\tlabel=\"Email (used as login credential)\"\r\n\t\t\t\t\t\t\t\t\tgroup type=\"email\"\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.contactPersonEmail}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('contactPersonEmail', e.target.value)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<div id=\"contactPersonEmail_err_msg\" className=\"invalid-feedback\">Required</div>\r\n\t\t\t\t\t\t\t\t<div id=\"contactPersonEmailExists_err_msg\" className=\"invalid-feedback\">Email address already in use</div>\r\n\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t\t<MDBCol md=\"4\">\r\n\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\tlabel=\"Role\"\r\n\t\t\t\t\t\t\t\t\tgroup\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.contactPersonRole}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('contactPersonRole', e.target.value)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<div id=\"contactPersonRole_err_msg\" className=\"invalid-feedback\">Required</div>\r\n\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t\t<MDBCol md=\"4\">\r\n\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\tlabel=\"Contact Number\"\r\n\t\t\t\t\t\t\t\t\tgroup\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.contactPersonNumber}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('contactPersonNumber', e.target.value)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<div id=\"contactPersonNumber_err_msg\" className=\"invalid-feedback\">Required</div>\r\n\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t</MDBRow>\r\n\r\n\t\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t\t<MDBCol md=\"5\">\r\n\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\tlabel=\"Enter Password\"\r\n\t\t\t\t\t\t\t\t\tgroup type=\"password\"\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.password}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('password', e.target.value)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<div id=\"password_err_msg\" className=\"invalid-feedback\">Required</div>\r\n\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t\t<MDBCol md=\"5\">\r\n\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\tlabel=\"Retype password\"\r\n\t\t\t\t\t\t\t\t\tgroup type=\"password\"\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.password_re}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('password_re', e.target.value)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<div id=\"password_re_err_msg\" className=\"invalid-feedback\">Passwords do not match</div>\r\n\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t\t<MDBCol md=\"2\">\r\n\t\t\t\t\t\t\t\t<FormControlLabel\r\n\t\t\t\t\t\t\t\t\tcontrol={<Checkbox checked={this.state.active} onChange={(e) => this.onChange('active', e.target.checked)} name=\"active\" />}\r\n\t\t\t\t\t\t\t\t\tlabel=\"Active\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t</MDBRow>\r\n\r\n\t\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t\t<MDBCol>\r\n\t\t\t\t\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t\t\t\t\t<MDBBtn outline color=\"success\" type=\"submit\">Register New User</MDBBtn>\r\n\t\t\t\t\t\t\t\t\t<MDBBtn outline color=\"warning\" onClick={this.resetForm}>Clear</MDBBtn>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t</MDBRow>\r\n\t\t\t\t\t</MDBContainer>\r\n\t\t\t\t</form>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(User);","import { MDBBtn, MDBCol, MDBContainer, MDBInput, MDBRow, MDBTable, MDBTableBody, MDBTableHead } from 'mdbreact';\r\nimport React, { Component } from 'react';\r\nimport DropdownMenu from '../Dropdown/DropdownMenu';\r\nimport { connect } from 'react-redux';\r\nimport { \r\n\tfetchCampaignAction,\r\n\tupdateCampaignAction,\r\n\tremoveCampaignAction,\r\n\taddCampaignAction,\r\n\texistingCampaignAction,\r\n\tcampaignFilter } from '../../store/session';\r\nimport * as filter from '../../store/globals/filter';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport { KeyboardDatePicker } from \"@material-ui/pickers\";\r\nimport { Button } from '@material-ui/core';\r\n// import Checkbox from '@material-ui/core/Checkbox';\r\n// import FormControlLabel from '@material-ui/core/FormControlLabel';\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\temail: state.userData.email,\r\n\t\tcampaignData: state.campaignList,\r\n\t\tcampaignFilter: state.campaignFilter\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn {\r\n\t\tfetchCampaigns: (userEmail) => dispatch(fetchCampaignAction(userEmail)),\r\n\t\tupdateCampaign: (campaignURL, updatedCampaign) => dispatch(updateCampaignAction(campaignURL, updatedCampaign)),\r\n\t\tremoveCampaign: (campaignURL, cb) => dispatch(removeCampaignAction(campaignURL, cb)),\r\n\t\tcheckCampaignURLExists: (url, cb) => dispatch(existingCampaignAction(url, cb)),\r\n\t\taddCampaign: (newCampaign, cb) => dispatch(addCampaignAction(newCampaign, cb)),\r\n\t\tfilterCampaigns: (filter) => dispatch(campaignFilter(filter))\r\n\t}\r\n}\r\n\r\n/*\r\n\trequirements:\r\n\t\tname\r\n\t\turl\r\n\t\tstart date\r\n\t\tend date\r\n\t\tvideo duration\r\n\t\tintro text\r\n\t\t[questions]\r\n\tcampaign object\r\n*/\r\n\r\nclass Campaign extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.columns = [\r\n\t\t\t{\r\n\t\t\t\tlabel: '#',\r\n\t\t\t\tfield: 'id'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: 'Campaign',\r\n\t\t\t\tfield: 'name'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: 'Campaign Balance',\r\n\t\t\t\tfield: 'balance'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: 'Video Duration',\r\n\t\t\t\tfield: 'duration'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: 'Intro Text',\r\n\t\t\t\tfield: 'intro'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: 'URL',\r\n\t\t\t\tfield: 'url'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: 'Manage',\r\n\t\t\t\tfield: 'manage'\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\tthis.campaignManagementActions = {\r\n\t\t\taddCampaign: 'addCampaign',\r\n\t\t\tremoveCampaign: 'removeCampaign',\r\n\t\t\tupdateCampaign: 'updateCampaign'\r\n\t\t}\r\n\r\n\t\tthis.state = {\r\n\t\t\trows: [],\r\n\t\t\tintro_len: 300,\r\n\t\t\tstartdate: new Date(),\r\n\t\t\tenddate: new Date()\r\n\t\t}\r\n\r\n\t\tthis.manageCampaign = this.manageCampaign.bind(this);\r\n\t\tthis.onChange = this.onChange.bind(this);\r\n\t\tthis.resetForm = this.resetForm.bind(this);\r\n\t\tthis.resetForm = this.resetForm.bind(this);\r\n\t\tthis.checkCampaignURLExistsResponse = this.checkCampaignURLExistsResponse.bind(this);\r\n\t\tthis.addCampaignResponse = this.addCampaignResponse.bind(this);\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tif (!this.props.campaignData)\r\n\t\t\tthis.props.fetchCampaigns(this.props.email);\r\n\t}\r\n\r\n\tonChange(property, val, index = -1) {\r\n\t\tif (property === 'intro') {\r\n\t\t\tif (val.length > 300)\r\n\t\t\t\tval = val.substring(0, 300);\r\n\t\t\tthis.setState({\r\n\t\t\t\tintro_len: 300 - val.length\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (property === 'question') {\r\n\t\t\tlet questions = this.state.questions ? this.state.questions : [];\r\n\r\n\t\t\tif (index >= 0) {\r\n\t\t\t\tquestions[index] = val;\r\n\t\t\t} else {\r\n\t\t\t\tquestions[questions.length] = \"\";\r\n\t\t\t}\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\tquestions\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (property === 'question-r') {\r\n\t\t\tlet questions = this.state.questions;\r\n\r\n\t\t\tif (index >= 0) {\r\n\t\t\t\tquestions[index] = null;\r\n\t\t\t}\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\tquestions\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (property === 'name') {\r\n\t\t\tdocument.getElementById('campaignNameExists_err_msg').style.display = \"none\";\r\n\t\t}\r\n\r\n\t\tif (property === 'url') {\r\n\t\t\tdocument.getElementById('campaignURLExists_err_msg').style.display = \"none\";\r\n\t\t}\r\n\r\n\t\tconst errElement = document.getElementById(`${property.includes('date') ? 'date' : property}_err_msg`);\r\n\t\tif (errElement)\r\n\t\t\terrElement.style.display = \"none\";\r\n\r\n\t\tif (property === 'startdate') {\r\n\t\t\tthis.setState({\r\n\t\t\t\t[property]: val,\r\n\t\t\t\tenddate: val\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\t[property]: val\r\n\t\t});\r\n\t}\r\n\r\n\t// campaign management\r\n\tcheckCampaignURLExistsResponse(response) {\r\n\t\tconsole.log(\"response: \", response);\r\n\t\tif (response.success) {\r\n\t\t\tdocument.getElementById('campaignURLExists_err_msg').style.display = \"block\";\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tconst questions = this.state.questions ? this.state.questions.filter((question) => question === null ? false : question.length === 0 ? false : true) : [];\r\n\r\n\t\tconst campaign = {\r\n\t\t\temail: this.props.email,\r\n\t\t\tcampaignURL: this.state.url,\r\n\t\t\tname: this.state.name,\r\n\t\t\tbalance: parseInt(\"10\"),\r\n\t\t\tduration: parseInt(this.state.duration),\r\n\t\t\tintro: this.state.intro,\r\n\t\t\tstartdate: this.state.startdate.getTime(),\r\n\t\t\tenddate: this.state.enddate.getTime(),\r\n\t\t\tquestions\r\n\t\t}\r\n\t\tconsole.log('new campaign: ', campaign);\r\n\t\tthis.props.addCampaign(campaign, this.addCampaignResponse);\r\n\t}\r\n\r\n\taddCampaignResponse(response) {\r\n\t\t// wait for further action\r\n\t\tconsole.log(\"response: \", response);\r\n\t\tif(response.success){\r\n\t\t\tthis.props.filterCampaigns(filter.campaignFilters.All);\r\n\t\t\tthis.props.fetchCampaigns(this.props.email);\r\n\t\t}\r\n\t}\r\n\r\n\tmanageCampaign(action, url) {\r\n\r\n\t\tlet targetCampaign;\r\n\t\tswitch (action) {\r\n\t\t\tcase this.campaignManagementActions.updateCampaign:\r\n\t\t\t\t\r\n\t\t\t\treturn;\r\n\r\n\t\t\tcase this.campaignManagementActions.removeCampaign:\r\n\t\t\t\ttargetCampaign = { ...this.props.campaignData.find((campaign) => campaign.campaignURL === url) };\r\n\t\t\t\tthis.props.removeCampaign(targetCampaign.campaignURL, () => this.props.fetchCampaigns(this.props.email));\r\n\t\t\t\treturn;\r\n\r\n\t\t\tcase this.campaignManagementActions.addCampaign:\r\n\t\t\t\tif (!this.state.name) {\r\n\t\t\t\t\tdocument.getElementById('name_err_msg').style.display = \"block\";\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.state.duration) {\r\n\t\t\t\t\tdocument.getElementById('duration_err_msg').style.display = \"block\";\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.state.url) {\r\n\t\t\t\t\tdocument.getElementById('url_err_msg').style.display = \"block\";\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// parse and check dates\r\n\t\t\t\tif (!this.state.startdate || !this.state.enddate) {\r\n\t\t\t\t\tdocument.getElementById('date_err_msg').style.display = \"block\";\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// if (this.state.startdate.getTime() >= this.state.enddate.getTime()) {\r\n\t\t\t\t// \tdocument.getElementById('date_err_msg').style.display = \"block\";\r\n\t\t\t\t// \treturn;\r\n\t\t\t\t// }\r\n\r\n\t\t\t\tthis.props.checkCampaignURLExists(this.state.url, this.checkCampaignURLExistsResponse);\r\n\t\t\t\treturn;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tconsole.log(\"will act as default\");\r\n\t\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\tresetForm() {\r\n\t\tthis.setState({\r\n\t\t\tname: \"\",\r\n\t\t\turl: \"\",\r\n\t\t\tduration: \"\",\r\n\t\t\tintro: \"\",\r\n\t\t\tstartdate: new Date(),\r\n\t\t\tenddate: new Date(),\r\n\t\t\tquestions: null\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.props.campaignFilter === filter.campaignFilters.All ||\r\n\t\t\tthis.props.campaignFilter === filter.campaignFilters.Active ||\r\n\t\t\tthis.props.campaignFilter === filter.campaignFilters.Past) {\r\n\t\t\tlet rows;\r\n\t\t\tconsole.log(\"Campaign data: \", this.props.campaignData);\r\n\t\t\tif (this.props.campaignData) {\r\n\t\t\t\tif (this.props.campaignData.length > 0) {\r\n\r\n\t\t\t\t\t// function generateMaterialCheckbox(id, checked){\r\n\t\t\t\t\t// \treturn <MDBBtn size=\"sm\" rounded color={checked ? \"success\":\"danger\"}>{checked ? \"Active\" : \"Inactive\"}</MDBBtn>;\r\n\t\t\t\t\t// }\r\n\t\t\t\t\tlet idCounter = 1;\r\n\t\t\t\t\trows = this.props.campaignData.map((campaign) => {\r\n\t\t\t\t\t\t// if(this.props.campaignFilter === filter.campaignFilters.Active && !user.active)\r\n\t\t\t\t\t\t// \treturn {};\r\n\t\t\t\t\t\t// if(this.props.userFilter === filter.userFilters.Inactive && user.active)\r\n\t\t\t\t\t\t// \treturn {};\r\n\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t'id': idCounter++,\r\n\t\t\t\t\t\t\t'name': campaign.name,\r\n\t\t\t\t\t\t\t'balance': campaign.balance,\r\n\t\t\t\t\t\t\t'duration': campaign.duration,\r\n\t\t\t\t\t\t\t'intro': campaign.intro,\r\n\t\t\t\t\t\t\t'url': campaign.campaignURL,\r\n\t\t\t\t\t\t\t'action': <DropdownMenu\r\n\t\t\t\t\t\t\t\ttrigger={\r\n\t\t\t\t\t\t\t\t\t({ isOpen, triggerRef, toggle }) =>\r\n\t\t\t\t\t\t\t\t\t\t<button type=\"button\" className=\"btn btn-outline-primary\" data-ripple-color=\"dark\"\r\n\t\t\t\t\t\t\t\t\t\t\tref={triggerRef}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={toggle}>\r\n\t\t\t\t\t\t\t\t\t\t\tManage Campaign\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</button>}\r\n\t\t\t\t\t\t\t\tid={campaign.campaignURL}\r\n\t\t\t\t\t\t\t\toptions={[\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tname: () => \"Edit Campaign\",\r\n\t\t\t\t\t\t\t\t\t\taction: this.campaignManagementActions.updateCampaign\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tname: () => \"Delete Campaign\",\r\n\t\t\t\t\t\t\t\t\t\taction: this.campaignManagementActions.removeCampaign\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\t\tcallback={this.manageCampaign}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<MDBTable btn>\r\n\t\t\t\t\t<MDBTableHead columns={this.columns} />\r\n\t\t\t\t\t<MDBTableBody rows={rows} />\r\n\t\t\t\t\t{/* <MDBTableBody rows={rows_outline_btn} /> */}\r\n\t\t\t\t</MDBTable>\r\n\t\t\t);\r\n\t\t}\r\n\t\t/*\r\n\t\t\trequirements:\r\n\t\t\t\tname\r\n\t\t\t\turl\r\n\t\t\t\tstart date\r\n\t\t\t\tend date\r\n\t\t\t\tvideo duration\r\n\t\t\t\tintro text\r\n\t\t\t\t[questions]\r\n\t\t\tcampaign object\r\n\t\t*/\r\n\t\tif (this.props.campaignFilter === filter.campaignFilters.New) {\r\n\t\t\t// question fields\r\n\t\t\tconst questionField =\r\n\t\t\t\tthis.state.questions ? <>\r\n\t\t\t\t\t{this.state.questions.map(\r\n\t\t\t\t\t\t(question, index) => {\r\n\t\t\t\t\t\t\tif (question === null)\r\n\t\t\t\t\t\t\t\treturn <></>;\r\n\t\t\t\t\t\t\treturn <MDBRow key={index}>\r\n\t\t\t\t\t\t\t\t<MDBCol md=\"11\">\r\n\t\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\tgroup\r\n\t\t\t\t\t\t\t\t\t\tvalue={question}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('question', e.target.value, index)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t\t\t<MDBCol md=\"1\">\r\n\t\t\t\t\t\t\t\t\t<IconButton size=\"small\" className=\"mt-4 ml-2\"\r\n\t\t\t\t\t\t\t\t\t\tonClick={(e) => this.onChange('question-r', null, index)}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<ClearIcon />\r\n\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t\t</MDBRow>;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t)}\r\n\t\t\t\t</> : <></>;\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<form className=\"needs-validation\" onSubmit={(e) => { e.preventDefault(); this.manageCampaign(this.campaignManagementActions.addCampaign); }}>\r\n\t\t\t\t\t<MDBContainer>\r\n\t\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t\t<MDBCol md=\"6\">\r\n\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\tlabel=\"Campaign Name\"\r\n\t\t\t\t\t\t\t\t\tgroup\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.name}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('name', e.target.value)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<div id=\"name_err_msg\" className=\"invalid-feedback\">Required</div>\r\n\t\t\t\t\t\t\t\t<div id=\"campaignNameExists_err_msg\" className=\"invalid-feedback\">This campaign name is taken</div>\r\n\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t\t<MDBCol md=\"6\">\r\n\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\tlabel=\"Video Duration (sec)\"\r\n\t\t\t\t\t\t\t\t\tgroup type=\"number\"\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.duration}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('duration', e.target.value)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<div id=\"duration_err_msg\" className=\"invalid-feedback\">Required</div>\r\n\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t</MDBRow>\r\n\t\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t\t<MDBCol md=\"12\">\r\n\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\tlabel=\"Campaign URL (no spaces) https://story.patronish.com/\"\r\n\t\t\t\t\t\t\t\t\tgroup\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.url}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('url', e.target.value)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<div id=\"url_err_msg\" className=\"invalid-feedback\">Valid URL Required (no spaces)</div>\r\n\t\t\t\t\t\t\t\t<div id=\"campaignURLExists_err_msg\" className=\"invalid-feedback\">This campaign URL is taken</div>\r\n\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t</MDBRow>\r\n\t\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t\t<MDBCol md=\"12\">\r\n\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\tlabel={`Campaign Introduction Text (optional - ${this.state.intro_len})`}\r\n\t\t\t\t\t\t\t\t\tgroup type=\"textarea\"\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.intro}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('intro', e.target.value)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t</MDBRow>\r\n\t\t\t\t\t\t<MDBRow className=\"mb-4\">\r\n\t\t\t\t\t\t\t<MDBCol md=\"6\">\r\n\t\t\t\t\t\t\t\t<KeyboardDatePicker\r\n\t\t\t\t\t\t\t\t\tlabel=\"Start Date\"\r\n\t\t\t\t\t\t\t\t\tautoOk\r\n\t\t\t\t\t\t\t\t\tvariant=\"inline\"\r\n\t\t\t\t\t\t\t\t\tminDate={new Date()}\r\n\t\t\t\t\t\t\t\t\tinputVariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\tformat=\"dd/MM/yyyy\"\r\n\t\t\t\t\t\t\t\t\tInputAdornmentProps={{ position: \"start\" }}\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.startdate}\r\n\t\t\t\t\t\t\t\t\tonChange={(date) => this.onChange('startdate', date)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t\t<MDBCol>\r\n\t\t\t\t\t\t\t\t<KeyboardDatePicker\r\n\t\t\t\t\t\t\t\t\tlabel=\"End Date\"\r\n\t\t\t\t\t\t\t\t\tautoOk\r\n\t\t\t\t\t\t\t\t\tvariant=\"inline\"\r\n\t\t\t\t\t\t\t\t\tminDate={this.state.startdate}\r\n\t\t\t\t\t\t\t\t\tinputVariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\tformat=\"dd/MM/yyyy\"\r\n\t\t\t\t\t\t\t\t\tInputAdornmentProps={{ position: \"start\" }}\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.enddate}\r\n\t\t\t\t\t\t\t\t\tonChange={(date) => this.onChange('enddate', date)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t</MDBRow>\r\n\t\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t\t<MDBCol>\r\n\t\t\t\t\t\t\t\t<div id=\"date_err_msg\" className=\"invalid-feedback\">Please select valid date(s) with at-least 1 day duration</div>\r\n\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t</MDBRow>\r\n\t\t\t\t\t\t{questionField}\r\n\t\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t\t<MDBCol>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\tstartIcon={<AddIcon />}\r\n\t\t\t\t\t\t\t\t\tonClick={() => this.onChange('question')}\r\n\t\t\t\t\t\t\t\t>Add Question</Button>\r\n\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t</MDBRow>\r\n\t\t\t\t\t\t<MDBRow >\r\n\t\t\t\t\t\t\t<MDBCol>\r\n\t\t\t\t\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t\t\t\t\t<MDBBtn outline color=\"success\" type=\"submit\">Add New Campaign</MDBBtn>\r\n\t\t\t\t\t\t\t\t\t<MDBBtn outline color=\"warning\" onClick={this.resetForm}>Clear</MDBBtn>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t</MDBRow>\r\n\t\t\t\t\t</MDBContainer>\r\n\t\t\t\t</form>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn <h1>Campaign Module Under Construction...</h1>;\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Campaign);","import React, { Component } from 'react';\r\nimport VideoPlayer from 'react-video-js-player';\r\nimport './Styles.css';\r\n\r\nclass VJSPlayer extends Component {\r\n\r\n\tplayer = {}\r\n\r\n\tonPlayerReady(player) {\r\n\t\t// console.log(\"Player is ready: \", player);\r\n\t\tthis.player = player;\r\n\t}\r\n\r\n\tonVideoPlay(duration) {\r\n\t\t// console.log(\"Video played at: \", duration);\r\n\t}\r\n\r\n\tonVideoEnd() {\r\n\t\t// console.log(\"Video playback ended\");\r\n\t\t// var playButton = document.getElementById('playButton');\r\n\t\t// playButton.style.display = \"block\";\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.props.src == null)\r\n\t\t\treturn (<></>);\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{/* <VideoPlayer\r\n\t\t\t\t\tclassName=\"player video-js\"\r\n\t\t\t\t\tcontrols={true}\r\n\t\t\t\t\tsrc={{ src: this.props.src, type: 'video/mp4' }}\r\n\t\t\t\t\tonReady={this.onPlayerReady.bind(this)}\r\n\t\t\t\t\tonPlay={this.onVideoPlay.bind(this)}\r\n\t\t\t\t\tonEnd={this.onVideoEnd.bind(this)}\r\n\t\t\t\t/> */}\r\n\t\t\t\t<div style={{height: \"100%\"}}>\r\n\t\t\t\t\t<VideoPlayer\r\n\t\t\t\t\t\tclassName=\"player video-js\"\r\n\t\t\t\t\t\tcontrols={true}\r\n\t\t\t\t\t\tsrc={{src: this.props.src, type: 'video/mp4'}}\r\n\t\t\t\t\t\tonReady={this.onPlayerReady.bind(this)}\r\n\t\t\t\t\t\tonPlay={this.onVideoPlay.bind(this)}\r\n\t\t\t\t\t\tonEnd={this.onVideoEnd.bind(this)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n}\r\nexport default VJSPlayer;","\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport VJSPlayer from './VideoPlayer/VideoPlayer';\r\nimport { clearVideoAction, onWaitAction, removeVideoAction } from '../../store/session';\r\nimport { FacebookShareButton, FacebookIcon, TwitterShareButton, TwitterIcon, WhatsappShareButton, WhatsappIcon } from 'react-share';\r\nimport { LinkedinShareButton, LinkedinIcon, RedditShareButton, RedditIcon } from 'react-share';\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tcampaignFilter: state.campaignData,\r\n\t\talbumName: state.albumName,\r\n\t\talbumList: state.albumList,\r\n\t\tvideoUrl: state.videoUrl\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn {\r\n\t\tdeleteVideo: (vidoeKey) => dispatch(removeVideoAction(vidoeKey)),\r\n\t\tcloseVideo: () => dispatch(clearVideoAction()),\r\n\t\toverlay: () => dispatch(onWaitAction())\r\n\t}\r\n}\r\n\r\nclass Video extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.generateTable = this.generateTable.bind(this);\r\n\t\tthis.downloadVideo = this.downloadVideo.bind(this);\r\n\t\tthis.playVideo = this.playVideo.bind(this);\r\n\t\tthis.closeVideo = this.closeVideo.bind(this);\r\n\r\n\t\tthis.state = { videoUrl: undefined };\r\n\t}\r\n\r\n\tgenerateTable() {\r\n\t\t// album list: \r\n\t\tif (!this.props.albumList) {\r\n\t\t\treturn <h3>No album selected</h3>;\r\n\t\t}\r\n\t\tif (this.props.albumList.length === 0) {\r\n\t\t\treturn <h3>No videos in this album</h3>;\r\n\t\t}\r\n\r\n\t\tconst tableRows = this.props.albumList.map((video, index) => {\r\n\t\t\treturn (\r\n\t\t\t\t<tr key={video.key}>\r\n\t\t\t\t\t<td>{index + 1}</td>\r\n\t\t\t\t\t<td>{video.key}</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\tclassName=\"btn btn-outline-success\"\r\n\t\t\t\t\t\t\t\tdata-ripple-color=\"dark\"\r\n\t\t\t\t\t\t\t\tonClick={() => { this.props.overlay(); this.playVideo(video.url); }}>\r\n\t\t\t\t\t\t\t\tPlay\r\n\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\tclassName=\"btn btn-outline-primary\"\r\n\t\t\t\t\t\t\t\tdata-ripple-color=\"dark\"\r\n\t\t\t\t\t\t\t\tonClick={() => this.downloadVideo(video.url)}>\r\n\t\t\t\t\t\t\t\tDownload\r\n\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\tclassName=\"btn btn-outline-danger\"\r\n\t\t\t\t\t\t\t\tdata-ripple-color=\"dark\"\r\n\t\t\t\t\t\t\t\tonClick={() => { this.props.overlay(); this.props.deleteVideo(video.key); }}>\r\n\t\t\t\t\t\t\t\tDelete\r\n\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<FacebookShareButton style={{\"margin\": \"10px\"}} url={video.url} quote={this.props.albumName} /* hashtag=\"#hashtag\" */>\r\n\t\t\t\t\t\t\t\t<FacebookIcon size={36} />\r\n\t\t\t\t\t\t\t</FacebookShareButton>\r\n\r\n\t\t\t\t\t\t\t<TwitterShareButton style={{\"margin\": \"10px\"}} url={video.url} title={this.props.albumName}>\r\n\t\t\t\t\t\t\t\t<TwitterIcon size={36} />\r\n\t\t\t\t\t\t\t</TwitterShareButton>\r\n\r\n\t\t\t\t\t\t\t<RedditShareButton style={{\"margin\": \"10px\"}} url={video.url} title={this.props.albumName}>\r\n\t\t\t\t\t\t\t\t<RedditIcon size={36} />\r\n\t\t\t\t\t\t\t</RedditShareButton>\r\n\r\n\t\t\t\t\t\t\t<WhatsappShareButton style={{\"margin\": \"10px\"}} url={video.url} title={this.props.albumName}>\r\n\t\t\t\t\t\t\t\t<WhatsappIcon size={36} />\r\n\t\t\t\t\t\t\t</WhatsappShareButton>\r\n\r\n\t\t\t\t\t\t\t<LinkedinShareButton style={{\"margin\": \"10px\"}} url={video.url} title={this.props.albumName} source={\"http://clients.patronish.com\"}>\r\n\t\t\t\t\t\t\t\t<LinkedinIcon size={36} />\r\n\t\t\t\t\t\t\t</LinkedinShareButton>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr>\r\n\t\t\t)\r\n\t\t});\r\n\r\n\t\tconst videoTable =\r\n\t\t\t<table id=\"playlist\">\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t{tableRows}\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>;\r\n\r\n\t\treturn videoTable;\r\n\t}\r\n\r\n\tplayVideo(videoUrl) {\r\n\t\tthis.setState({\r\n\t\t\tvideoUrl\r\n\t\t});\r\n\t}\r\n\r\n\tcloseVideo() {\r\n\t\tthis.setState({\r\n\t\t\tvideoUrl: undefined\r\n\t\t});\r\n\t\tthis.props.closeVideo();\r\n\t}\r\n\r\n\tdownloadVideo(url) {\r\n\t\twindow.location.href = url;\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst videoTable = this.generateTable();\r\n\r\n\t\tlet showVideo = 'none';\r\n\r\n\t\tif (this.state.videoUrl) {\r\n\t\t\tshowVideo = 'block';\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<div id=\"overlay\" className=\"overlay\" style={{ display: showVideo }}></div>\r\n\r\n\t\t\t\t{ this.props.albumName ? <h1>Campaign <b>{this.props.albumName}</b></h1> : <></>}\r\n\r\n\t\t\t\t<div id=\"playlistWrapper\" className=\"playlist\">\r\n\t\t\t\t\t{videoTable}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div id=\"player\" className=\"playerWrapper\" style={{ display: showVideo }}>\r\n\t\t\t\t\t<button className=\"closeButton\" onClick={() => this.closeVideo()}>&#10006;</button>\r\n\t\t\t\t\t{this.state.videoUrl ? <VJSPlayer src={this.state.videoUrl} /> : <></>}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Video);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Navbar from '../Navbar/Navbar';\r\nimport Sidebar from '../Navbar/Sidebar';\r\nimport User from '../User/User';\r\nimport Campaign from '../Campaign/Campaign';\r\nimport Video from '../Videos/Video';\r\nimport * as nav from '../../store/globals/nav';\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tactiveModule: state.activeModule\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn {\r\n\r\n\t}\r\n}\r\n\r\nclass Admin extends Component {\r\n\t\r\n\trender() {\r\n\t\tlet dom =\r\n\t\t\t<>\r\n\t\t\t\t<Navbar />\r\n\t\t\t\t<Sidebar />\r\n\t\t\t\t<div style={{ \"marginLeft\": \"270px\", \"marginTop\": \"64px\", padding: \"10px\" }}>\r\n\t\t\t\t\t{this.props.activeModule === nav.modules.user ? <User /> : ''}\r\n\t\t\t\t\t{this.props.activeModule === nav.modules.campaign ? <Campaign /> : ''}\r\n\t\t\t\t\t{this.props.activeModule === nav.modules.video ? <Video /> : ''}\r\n\t\t\t\t</div>\r\n\t\t\t</>;\r\n\r\n\t\treturn (dom);\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Admin);","import React from \"react\";\r\n\r\nexport function Link(props) {\r\n\tconst { classes, prepend, text, append, callback } = props;\r\n\r\n\treturn <p className={classes}>\r\n\t\t\t\t{prepend}\r\n\t\t\t\t\t<strong style={{ cursor: \"pointer\" }} onClick={() => callback()}>\r\n\t\t\t\t\t\t{text}\r\n\t\t\t\t\t</strong>\r\n\t\t\t\t{append}\r\n\t\t\t</p>;\r\n}","export const userAddedSuccess = \"userAddedSuccess\";\r\nexport const userAlreadyExists = \"userAlreadyExists\";\r\nexport const incompleteUserData = \"incompleteUserData\";\r\nexport const invalidUserData = \"invalidUserData\";\r\n\r\nexport const notificationType = {\r\n\tsuccess: \"success\",\r\n\terror: \"error\"\r\n}\r\n\r\n// export const \tserverNotResponding: \"serverNotResponding\",\r\n// export const \tserverError: \"serverError\"","import React, { Component } from \"react\";\r\nimport { MDBContainer, MDBRow, MDBCol, MDBInput, MDBBtn } from 'mdbreact';\r\nimport {Link} from '../FunctionalComponents/Link';\r\nimport { connect } from 'react-redux';\r\nimport { loginAction } from '../../store/session';\r\nimport { notificationType } from '../../store/globals/codes';\r\nimport { navigate } from '../../store/session';\r\nimport * as nav from '../../store/globals/nav';\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tloading: state.loading\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn {\r\n\t\tlogin: (email, password, cb) => dispatch(loginAction(email, password, cb)),\r\n\t\tnavigate: (to) => dispatch(navigate(to))\r\n\t}\r\n}\r\n\r\nclass Login extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.onChange = this.onChange.bind(this);\r\n\t\tthis.initLogin = this.initLogin.bind(this);\r\n\t\tthis.notify = this.notify.bind(this);\r\n\r\n\t\tthis.state = {\r\n\t\t\t// email: 'usman.shery@gmail.com',\r\n\t\t\t// password: 'cellcycle'\r\n\t\t}\r\n\t}\r\n\r\n\tonChange(property, val) {\r\n\t\tthis.setState({\r\n\t\t\t[property]: val\r\n\t\t});\r\n\t}\r\n\r\n\tinitLogin() {\r\n\t\tthis.props.login(this.state.email, this.state.password, this.notify);\r\n\t}\r\n\r\n\tnotify(response) {\r\n\t\tif(response.success){\r\n\t\t\tthis.props.notify(notificationType.success, \"Login successful\");\r\n\t\t}else{\r\n\t\t\tthis.props.notify(notificationType.error, response.message);\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div style={{ height: \"100vh\" }}>\r\n\t\t\t\t<div className=\"bg-dark col-12 container h-100\">\r\n\t\t\t\t\t<div className=\"row align-items-center h-100\">\r\n\t\t\t\t\t\t<div className=\"col-sm-10 col-md-8 col-lg-6 col-xl-4  mx-auto\">\r\n\t\t\t\t\t\t\t<MDBContainer>\r\n\t\t\t\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t\t\t\t<MDBCol md=\"12\">\r\n\t\t\t\t\t\t\t\t\t\t<p className=\"h3 text-white text-center mb-4\">Sign in</p>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"grey-text\">\r\n\t\t\t\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Email\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ticon=\"envelope\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tgroup type=\"email\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalidate error=\"wrong email address format\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tsuccess=\"right\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('email', e.target.value)}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Type your password\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ticon=\"lock\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tgroup type=\"password\" validate\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('password', e.target.value)}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"text-right\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Link \r\n\t\t\t\t\t\t\t\t\t\t\t\tclasses=\"text-white\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ttext=\"Reset Password\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tcallback={() => this.props.navigate(nav.modules.passwordReset)}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<MDBBtn onClick={this.initLogin}>Login</MDBBtn>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"text-center mt-3\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Link \r\n\t\t\t\t\t\t\t\t\t\t\t\tclasses=\"text-white\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tprepend=\"Don't have an account? \"\r\n\t\t\t\t\t\t\t\t\t\t\t\ttext=\"Register\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tcallback={() => this.props.navigate(nav.modules.register)}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t\t\t</MDBRow>\r\n\t\t\t\t\t\t\t</MDBContainer>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);","import React, { Component } from \"react\";\r\nimport { MDBContainer, MDBRow, MDBCol, MDBInput, MDBBtn } from 'mdbreact';\r\nimport { connect } from 'react-redux';\r\nimport { registerAction, existingUserAction, navigate } from '../../store/session';\r\nimport { notificationType } from '../../store/globals/codes';\r\nimport * as nav from '../../store/globals/nav';\r\nimport * as filter from '../../store/globals/filter';\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tloading: state.loading\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn {\r\n\t\tcheckUserExists: (email, cb) => dispatch(existingUserAction(email, cb)),\r\n\t\taddUser: (user, cb) => dispatch(registerAction(user, cb)),\r\n\t\tnavigate: (to) => dispatch(navigate(to))\r\n\t}\r\n}\r\n\r\nclass Register extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.onChange = this.onChange.bind(this);\r\n\t\tthis.initRegister = this.initRegister.bind(this);\r\n\t\tthis.checkUserExistsResponse = this.checkUserExistsResponse.bind(this);\r\n\t\tthis.resetForm = this.resetForm.bind(this);\r\n\t\tthis.notify = this.notify.bind(this);\r\n\r\n\t\tthis.state = {\r\n\t\t\tcompanyName: undefined\r\n\t\t}\r\n\t}\r\n\r\n\tonChange(property, val) {\r\n\t\tthis.setState({\r\n\t\t\t[property]: val\r\n\t\t});\r\n\r\n\t\tconst element = document.getElementById(`${property}_err_msg`);\r\n\t\tif (element) {\r\n\t\t\telement.style.display = \"none\";\r\n\t\t\tif (property === 'contactPersonEmail')\r\n\t\t\t\tdocument.getElementById('contactPersonEmailExists_err_msg').style.display = \"none\";\r\n\t\t}\r\n\t}\r\n\r\n\tinitRegister() {\r\n\t\tif (!this.state.companyName) {\r\n\t\t\tdocument.getElementById('companyName_err_msg').style.display = \"block\";\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!this.state.location) {\r\n\t\t\tdocument.getElementById('location_err_msg').style.display = \"block\";\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!this.state.postCode) {\r\n\t\t\tdocument.getElementById('postCode_err_msg').style.display = \"block\";\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!this.state.country) {\r\n\t\t\tdocument.getElementById('country_err_msg').style.display = \"block\";\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!this.state.contactPersonName) {\r\n\t\t\tdocument.getElementById('contactPersonName_err_msg').style.display = \"block\";\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!this.state.contactPersonEmail) {\r\n\t\t\tdocument.getElementById('contactPersonEmail_err_msg').style.display = \"block\";\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!filter.validateEmail(this.state.contactPersonEmail)) {\r\n\t\t\tdocument.getElementById('contactPersonEmail_err_msg').style.display = \"block\";\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!this.state.contactPersonRole) {\r\n\t\t\tdocument.getElementById('contactPersonRole_err_msg').style.display = \"block\";\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!this.state.contactPersonNumber) {\r\n\t\t\tdocument.getElementById('contactPersonNumber_err_msg').style.display = \"block\";\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!this.state.password) {\r\n\t\t\tdocument.getElementById('password_err_msg').style.display = \"block\";\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this.state.password !== this.state.password_re) {\r\n\t\t\tdocument.getElementById('password_re_err_msg').style.display = \"block\";\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.props.checkUserExists(this.state.contactPersonEmail, this.checkUserExistsResponse);\r\n\t}\r\n\r\n\tcheckUserExistsResponse(response) {\r\n\t\tconsole.log(\"exists response: \", response);\r\n\t\tif (response.success) {\r\n\t\t\tconsole.log(\"in?\");\r\n\t\t\tdocument.getElementById('contactPersonEmailExists_err_msg').style.display = \"block\";\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconsole.log(\"right after\");\r\n\r\n\t\tconst { companyName, location, postCode, country, employeeSize,\r\n\t\t\tcontactPersonName, contactPersonEmail, contactPersonRole, contactPersonNumber, password } = this.state;\r\n\r\n\t\tconst user = {\r\n\t\t\tname: contactPersonName,\r\n\t\t\temail: contactPersonEmail,\r\n\t\t\tpassword,\r\n\t\t\trole: contactPersonRole,\r\n\t\t\tcontact: contactPersonNumber,\r\n\r\n\t\t\tcompany: {\r\n\t\t\t\tname: companyName,\r\n\t\t\t\tlocation,\r\n\t\t\t\tpostCode,\r\n\t\t\t\tcountry,\r\n\t\t\t\temployeeSize: employeeSize ? employeeSize : -1\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconsole.log('new user: ', user);\r\n\t\tthis.props.addUser(user, this.notify);\r\n\t}\r\n\r\n\tresetForm() {\r\n\t\tthis.setState({\r\n\t\t\tcompanyName: \"\",\r\n\t\t\tlocation: \"\",\r\n\t\t\tpostCode: \"\",\r\n\t\t\tcountry: \"\",\r\n\t\t\temployeeSize: \"\",\r\n\r\n\t\t\tcontactPersonName: \"\",\r\n\t\t\tcontactPersonEmail: \"\",\r\n\t\t\tcontactPersonRole: \"\",\r\n\t\t\tcontactPersonNumber: \"\",\r\n\r\n\t\t\tpassword: \"\",\r\n\t\t\tpassword_re: \"\"\r\n\t\t});\r\n\t}\r\n\r\n\tnotify(response) {\r\n\t\tif (response.success) {\r\n\t\t\tthis.props.notify(notificationType.success, \"Registration successful\");\r\n\t\t\tthis.props.navigate(nav.modules.login);\r\n\t\t} else {\r\n\t\t\tthis.props.notify(notificationType.error, response.message);\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<div style={{ height: \"100vh\" }}>\r\n\t\t\t\t\t<div className=\"bg-dark col-12 container h-100\">\r\n\t\t\t\t\t\t<div className=\"row align-items-center h-100\">\r\n\t\t\t\t\t\t\t<div className=\"col-sm-10 col-md-8 col-lg-6 col-xl-4  mx-auto\">\r\n\t\t\t\t\t\t\t\t<form className=\"needs-validation\" onSubmit={(e) => { e.preventDefault(); this.initRegister(); }}>\r\n\t\t\t\t\t\t\t\t\t<MDBContainer>\r\n\t\t\t\t\t\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<MDBCol md=\"12\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p id=\"x\" className=\"h3 text-center text-white mb-4\">Company</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Company Name\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tgroup\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.companyName}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('companyName', e.target.value)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div id=\"companyName_err_msg\" className=\"invalid-feedback\">Required</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Location\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tgroup\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.location}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('location', e.target.value)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div id=\"location_err_msg\" className=\"invalid-feedback\">Required</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{/* log goes here */}\r\n\t\t\t\t\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t\t\t\t\t</MDBRow>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<MDBCol md=\"4\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Post Code\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tgroup type=\"number\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.postCode}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('postCode', e.target.value)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div id=\"postCode_err_msg\" className=\"invalid-feedback\">Required</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t\t\t\t\t\t<MDBCol md=\"4\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Country\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tgroup\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.country}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('country', e.target.value)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div id=\"country_err_msg\" className=\"invalid-feedback\">Required</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t\t\t\t\t\t<MDBCol md=\"4\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Employee Size\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tgroup\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.employeeSize}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('employeeSize', e.target.value)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t\t\t\t\t</MDBRow>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<MDBCol>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p id=\"x\" className=\"h3 text-center text-white mb-4 mt-3\">Contact Person (Account Holder)</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Name\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tgroup\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.contactPersonName}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('contactPersonName', e.target.value)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div id=\"contactPersonName_err_msg\" className=\"invalid-feedback\">Required</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t\t\t\t\t</MDBRow>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<MDBCol md=\"4\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Email (used as login credential)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tgroup type=\"email\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.contactPersonEmail}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('contactPersonEmail', e.target.value)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div id=\"contactPersonEmail_err_msg\" className=\"invalid-feedback\">Required</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div id=\"contactPersonEmailExists_err_msg\" className=\"invalid-feedback\">Email address already in use</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t\t\t\t\t\t<MDBCol md=\"4\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Role\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tgroup\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.contactPersonRole}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('contactPersonRole', e.target.value)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div id=\"contactPersonRole_err_msg\" className=\"invalid-feedback\">Required</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t\t\t\t\t\t<MDBCol md=\"4\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Contact Number\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tgroup\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.contactPersonNumber}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('contactPersonNumber', e.target.value)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div id=\"contactPersonNumber_err_msg\" className=\"invalid-feedback\">Required</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t\t\t\t\t</MDBRow>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<MDBCol md=\"6\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Enter Password\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tgroup type=\"password\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.password}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('password', e.target.value)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div id=\"password_err_msg\" className=\"invalid-feedback\">Required</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t\t\t\t\t\t<MDBCol md=\"6\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Retype password\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tgroup type=\"password\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.password_re}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('password_re', e.target.value)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div id=\"password_re_err_msg\" className=\"invalid-feedback\">Passwords do not match</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t\t\t\t\t</MDBRow>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t\t\t\t\t\t<MDBCol>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MDBBtn type=\"submit\">Register New User</MDBBtn>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MDBBtn onClick={this.resetForm}>Clear</MDBBtn>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t\t\t\t\t</MDBRow>\r\n\t\t\t\t\t\t\t\t\t</MDBContainer>\r\n\t\t\t\t\t\t\t\t</form>\r\n\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<MDBBtn outline color=\"success\" style={{ position: \"absolute\", top: \"0%\", right: \"0%\" }} onClick={() => this.props.navigate(nav.modules.login)}>Login</MDBBtn>\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Register);","import React, { Component } from \"react\";\r\nimport { MDBContainer, MDBRow, MDBCol, MDBInput, MDBBtn } from 'mdbreact';\r\nimport { connect } from 'react-redux';\r\nimport { existingUserAction, otpAction, passwordResetAction } from '../../store/session';\r\nimport { notificationType } from '../../store/globals/codes';\r\nimport { navigate } from '../../store/session';\r\nimport * as nav from '../../store/globals/nav';\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tloading: state.loading\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn {\r\n\t\tcheckUserExists: (email, cb) => dispatch(existingUserAction(email, cb)),\r\n\t\tgenerateOTP: (email, cb) => dispatch(otpAction(email, cb)),\r\n\t\tpasswordReset: (email, otp, password, cb) => dispatch(passwordResetAction(email, otp, password, cb)),\r\n\t\tnavigate: (to) => dispatch(navigate(to))\r\n\t}\r\n}\r\n\r\nclass PasswordReset extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.onChange = this.onChange.bind(this);\r\n\r\n\t\tthis.generateOTP = this.generateOTP.bind(this);\r\n\t\tthis.generateOTPResponse = this.generateOTPResponse.bind(this);\r\n\r\n\t\tthis.initPasswordReset = this.initPasswordReset.bind(this);\r\n\t\tthis.passwordResetResponse = this.passwordResetResponse.bind(this);\r\n\r\n\t\tthis.notify = this.notify.bind(this);\r\n\r\n\t\tthis.state = {\r\n\t\t\temailInputDisabled: false\r\n\t\t}\r\n\t}\r\n\r\n\tonChange(property, val) {\r\n\t\tconst el = document.getElementById(`${property}_err_msg`);\r\n\t\tif(el)\r\n\t\t\tel.style.display = \"none\";\r\n\r\n\t\tthis.setState({\r\n\t\t\t[property]: val\r\n\t\t});\r\n\t}\r\n\t\r\n\tgenerateOTP(response) {\r\n\t\tconsole.log(\"At generateOTP response: \" , response);\r\n\t\tif(response){\r\n\t\t\t// send otp request\r\n\t\t\tif(response.success){\r\n\t\t\t\tthis.props.generateOTP(this.state.email, this.generateOTPResponse);\r\n\t\t\t}else{\r\n\t\t\t\t// email not found\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\temailInputDisabled: false\r\n\t\t\t\t});\r\n\t\t\t\tdocument.getElementById('email_err_msg').style.display = \"block\";\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// check email validation\r\n\t\tthis.setState({\r\n\t\t\temailInputDisabled: true\r\n\t\t});\r\n\t\tthis.props.checkUserExists(this.state.email, this.generateOTP);\r\n\t}\r\n\r\n\tgenerateOTPResponse(response) {\r\n\t\tconsole.log(\"At generateOTPResponse response: \" , response);\r\n\t\t// act based on response\r\n\t\tif(!response.success){\r\n\t\t\tthis.notify(response);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telse{\r\n\t\t\tdocument.getElementById('email_info_msg').style.display = \"block\";\r\n\t\t\tthis.notify({success: true, message: \"OTP generation success\"});\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\tinitPasswordReset() {\r\n\t\t// extract user input values\r\n\t\tconst { email, otp, password, password_re } = this.state;\r\n\r\n\t\tif(password !== password_re){\r\n\t\t\tdocument.getElementById('password_re_err_msg').style.display = \"block\";\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif(!otp){\r\n\t\t\tdocument.getElementById('otp_err_msg').style.display = \"block\";\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.props.passwordReset(email, otp, password, this.passwordResetResponse);\r\n\t}\r\n\r\n\tpasswordResetResponse(response) {\r\n\t\tif(response.success){\r\n\t\t\tthis.props.navigate(nav.modules.login);\r\n\t\t}\r\n\t\tthis.notify(response);\r\n\t}\r\n\r\n\tnotify(response) {\r\n\t\tconsole.log(\"At notify response: \" , response);\r\n\t\tif (response.success) {\r\n\t\t\tif(response.message){\r\n\t\t\t\tthis.props.notify(notificationType.success, response.message);\r\n\t\t\t}else{\r\n\t\t\t\tthis.props.notify(notificationType.success, \"Password Reset Successful\");\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif(response.message){\r\n\t\t\t\tthis.props.notify(notificationType.error, response.message);\r\n\t\t\t}\r\n\t\t\tif(response.err){\r\n\t\t\t\tthis.props.notify(notificationType.error, response.err);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<div style={{ height: \"100vh\" }}>\r\n\t\t\t\t\t<div className=\"bg-dark col-12 container h-100\">\r\n\t\t\t\t\t\t<div className=\"row align-items-center h-100\">\r\n\t\t\t\t\t\t\t<div className=\"col-sm-10 col-md-8 col-lg-6 col-xl-4 grey-text mx-auto\">\r\n\t\t\t\t\t\t\t\t<MDBContainer>\r\n\t\t\t\t\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t\t\t\t\t<MDBCol>\r\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"h3 text-white text-center mb-4\">Reset Password</p>\r\n\t\t\t\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t\t\t\t</MDBRow>\r\n\t\t\t\t\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t\t\t\t\t<MDBCol md=\"12\">\r\n\t\t\t\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Email\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ticon=\"envelope\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tgroup type=\"email\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalidate error=\"wrong email address format\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.email}\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={this.state.emailInputDisabled}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('email', e.target.value)}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t<div id=\"email_err_msg\" className=\"invalid-feedback\">Email not found</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div id=\"email_info_msg\" className=\"valid-feedback\">OTP has been sent to your email, it is valid for next 10 minutes</div>\r\n\t\t\t\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t\t\t\t</MDBRow>\r\n\t\t\t\t\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t\t\t\t\t<MDBCol>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<MDBBtn onClick={() => this.generateOTP()}>Send OTP Email</MDBBtn>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t\t\t\t</MDBRow>\r\n\r\n\t\t\t\t\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t\t\t\t\t<MDBCol>\r\n\t\t\t\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Enter OTP (received by email)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ticon=\"lock\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tgroup\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('otp', e.target.value)}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t<div id=\"otp_err_msg\" className=\"invalid-feedback\">Required</div>\r\n\t\t\t\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t\t\t\t</MDBRow>\r\n\r\n\t\t\t\t\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t\t\t\t\t<MDBCol>\r\n\t\t\t\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Type new password\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ticon=\"lock\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tgroup type=\"password\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('password', e.target.value)}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t\t\t\t</MDBRow>\r\n\t\t\t\t\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t\t\t\t\t<MDBCol>\r\n\t\t\t\t\t\t\t\t\t\t\t<MDBInput\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Re-type new password\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ticon=\"lock\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tgroup type=\"password\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => this.onChange('password_re', e.target.value)}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t<div id=\"password_re_err_msg\" className=\"invalid-feedback\">Passwords do not match</div>\r\n\t\t\t\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t\t\t\t</MDBRow>\r\n\r\n\t\t\t\t\t\t\t\t\t<MDBRow>\r\n\t\t\t\t\t\t\t\t\t\t<MDBCol>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<MDBBtn onClick={this.initPasswordReset}>Reset Password</MDBBtn>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</MDBCol>\r\n\t\t\t\t\t\t\t\t\t</MDBRow>\r\n\t\t\t\t\t\t\t\t</MDBContainer>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<MDBBtn outline color=\"success\" style={{ position: \"absolute\", top: \"0%\", right: \"0%\" }} onClick={() => this.props.navigate(nav.modules.login)}>Login</MDBBtn>\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PasswordReset);","import React, { Component } from 'react';\nimport Admin from './components/Admin/Admin';\nimport Login from './components/Login/Login';\nimport Register from './components/Login/Register';\nimport PasswordReset from './components/Login/PasswordReset';\nimport { connect } from 'react-redux';\nimport { pageLoadAction } from './store/session';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { notificationType } from './store/globals/codes';\nimport * as nav from '../src/store/globals/nav';\nimport './Styles.css';\n\nconst mapStateToProps = state => {\n\treturn {\n\t\tloading: state.loading,\n\t\tloggedIn: state.loggedIn,\n\t\tactiveModule: state.activeModule\n\t}\n}\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\tonPageLoad: () => dispatch(pageLoadAction())\n\t}\n}\n\nclass App extends Component {\n\n\tcomponentDidMount() {\n\t\tif (!this.props.loggedIn)\n\t\t\tthis.props.onPageLoad();\n\t}\n\n\tnotify(type, content) {\n\t\tswitch (type) {\n\t\t\tcase notificationType.success:\n\t\t\t\ttoast.success(content, {\n\t\t\t\t\tposition: \"top-right\",\n\t\t\t\t\tautoClose: 3000,\n\t\t\t\t\thideProgressBar: true,\n\t\t\t\t\tcloseOnClick: true,\n\t\t\t\t\tpauseOnHover: false,\n\t\t\t\t\tdraggable: true,\n\t\t\t\t\tprogress: undefined,\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase notificationType.error:\n\t\t\t\ttoast.error(content, {\n\t\t\t\t\tposition: \"top-right\",\n\t\t\t\t\tautoClose: 3000,\n\t\t\t\t\thideProgressBar: true,\n\t\t\t\t\tcloseOnClick: true,\n\t\t\t\t\tpauseOnHover: false,\n\t\t\t\t\tdraggable: true,\n\t\t\t\t\tprogress: undefined,\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\ttoast.warn(\"Invalid notification issue\", {\n\t\t\t\t\tposition: \"top-right\",\n\t\t\t\t\tautoClose: 5000,\n\t\t\t\t\thideProgressBar: true,\n\t\t\t\t\tcloseOnClick: true,\n\t\t\t\t\tpauseOnHover: false,\n\t\t\t\t\tdraggable: true,\n\t\t\t\t\tprogress: undefined,\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t}\n\t}\n\t\n\trender() {\n\t\tlet overlayStyle = 'none';\n\t\tif(this.props.loading){\n\t\t\toverlayStyle = 'block';\n\t\t}\n\n\t\tif (this.props.loggedIn) {\n\t\t\treturn <>\n\t\t\t\t<ToastContainer\n\t\t\t\t\tposition=\"top-right\"\n\t\t\t\t\tautoClose={1000}\n\t\t\t\t\thideProgressBar\n\t\t\t\t\tnewestOnTop={false}\n\t\t\t\t\tcloseOnClick\n\t\t\t\t\trtl={false}\n\t\t\t\t\tpauseOnFocusLoss={false}\n\t\t\t\t\tdraggable\n\t\t\t\t\tpauseOnHover={false}\n\t\t\t\t/>\n\t\t\t\t<div id=\"loader\" className=\"loader\" style={{display: overlayStyle}}></div>\n\t\t\t\t<div id=\"overlay\" className=\"overlay\" style={{display: overlayStyle}}></div>\n\t\t\t\t<Admin />\n\t\t\t</>;\n\t\t} else {\n\t\t\treturn <>\n\t\t\t\t<ToastContainer\n\t\t\t\t\tposition=\"top-right\"\n\t\t\t\t\tautoClose={1000}\n\t\t\t\t\thideProgressBar\n\t\t\t\t\tnewestOnTop={false}\n\t\t\t\t\tcloseOnClick\n\t\t\t\t\trtl={false}\n\t\t\t\t\tpauseOnFocusLoss={false}\n\t\t\t\t\tdraggable\n\t\t\t\t\tpauseOnHover={false}\n\t\t\t\t/>\n\t\t\t\t{this.props.activeModule === nav.modules.login ? <Login notify={this.notify} /> : <></>}\n\t\t\t\t{this.props.activeModule === nav.modules.register ? <Register notify={this.notify} /> : <></>}\n\t\t\t\t{this.props.activeModule === nav.modules.passwordReset ? <PasswordReset notify={this.notify} /> : <></>}\n\t\t\t</>;\n\t\t}\n\t}\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import * as actions from '../api';\r\n\r\n/*\r\n\tRequired:\r\n\t-\turl\r\n\t-\tmethod\r\n\t-\theaders\r\n\t-\tbody\r\n\t-\tonSuccess\r\n\t-\tonFailure\r\n*/\r\n\r\nconst debug = false;\r\n\r\nconst api = state => next => async action => {\r\n\tlet {dispatch} = state;\r\n\tlog('action', action);\r\n\tif(action.type !== actions.apiCall.type) return next(action);\r\n\r\n\tconst {onSuccess, onFailure, url, callParams, cb } = action.payload;\r\n\tlog('url', action.payload.url);\r\n\t\r\n\tfetch(url, { ...callParams })\r\n\t.then(response => response.json())\r\n\t.then((response) => {\r\n\t\tlog('response', response);\r\n\t\tif(cb && typeof cb === 'function'){\r\n\t\t\tcb(response);\r\n\t\t}\r\n\t\tif(onSuccess)\r\n\t\t\tdispatch({type: onSuccess, payload: response});\r\n\t})\r\n\t.catch((err) => {\r\n\t\t// dispatch(actions.apiCallFailure(err));\r\n\t\tlog('error', err);\r\n\t\tif(onFailure){\r\n\t\t\tdispatch({type: onFailure, payload: err});\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction log(type, data){\r\n\tif(debug)\r\n\tconsole.log('MIDDLEWARE<API> -> ' + type + ': ', data);\r\n}\r\n\r\nexport default api;","import { configureStore, getDefaultMiddleware } from '@reduxjs/toolkit';\r\nimport reducer from './session';\r\nimport api from './middleware/api';\r\n\r\nconst store = configureStore({\r\n\treducer,\r\n\tmiddleware: [\r\n\t\t...getDefaultMiddleware(),\r\n\t\tapi\r\n\t]\r\n});\r\n\r\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { Provider } from 'react-redux';\nimport store from './store/store';\n\nimport '@fortawesome/fontawesome-free/css/all.min.css';\nimport 'bootstrap-css-only/css/bootstrap.min.css';\nimport 'mdbreact/dist/css/mdb.css';\n\nimport DateFnsUtils from '@date-io/date-fns';\nimport { MuiPickersUtilsProvider } from \"@material-ui/pickers\";\n\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<Provider store={store}>\n\t\t\t<MuiPickersUtilsProvider utils={DateFnsUtils}>\n\t\t\t\t<App />\n\t\t\t</MuiPickersUtilsProvider>\n\t\t</Provider>\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}